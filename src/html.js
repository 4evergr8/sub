export let html = `
PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InpoIj4KPGhlYWQ+CiAgICA8bGluayByZWw9ImFwcGxlLXRvdWNoLWljb24iIHNpemVzPSIxODB4MTgwIiBocmVmPSJodHRwczovLzRldmVyZ3I4LmdpdGh1Yi5pby9yZXNvdXJjZXMvaWNvbi5wbmciPgogICAgPGxpbmsgcmVsPSJpY29uIiB0eXBlPSJpbWFnZS9wbmciIHNpemVzPSIzMngzMiIgaHJlZj0iaHR0cHM6Ly80ZXZlcmdyOC5naXRodWIuaW8vcmVzb3VyY2VzL2ljb24ucG5nIj4KICAgIDxsaW5rIHJlbD0iaWNvbiIgdHlwZT0iaW1hZ2UvcG5nIiBzaXplcz0iMTZ4MTYiIGhyZWY9Imh0dHBzOi8vNGV2ZXJncjguZ2l0aHViLmlvL3Jlc291cmNlcy9pY29uLnBuZyI+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+Q2xhc2jphY3nva7ono3lkIg8L3RpdGxlPgogICAgPHNjcmlwdCB0eXBlPSJ0ZXh0L2phdmFzY3JpcHQiIHNyYz0iaHR0cHM6Ly9jZG5qcy5jbG91ZGZsYXJlLmNvbS9hamF4L2xpYnMvcXJjb2RlanMvMS4wLjAvcXJjb2RlLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c3R5bGU+CgoKCiAgICAgICAgQGltcG9ydCB1cmwoJ2h0dHBzOi8vZm9udHMuZ29vZ2xlYXBpcy5jb20vY3NzMj9mYW1pbHk9Tm90bytTYW5zJmZhbWlseT1Ob3RvK1NhbnMrU0M6d2dodEA0MDAmZGlzcGxheT1zd2FwJyk7CgogICAgICAgICNHaXRIdWJJY29uIHsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICJQbGF5d3JpdGUgQVUgU0EiLCAiWkNPT0wgS3VhaUxlIiwgc2VyaWY7CiAgICAgICAgICAgIHBvc2l0aW9uOiBmaXhlZDsgLyog5Zu65a6a5L2N572uICovCiAgICAgICAgICAgIGJvdHRvbTogMTBweDsgLyog6Led56a75bqV6YOoMTBweCAqLwogICAgICAgICAgICByaWdodDogMTBweDsgLyog6Led56a75Y+z5L6nMTBweCAqLwogICAgICAgICAgICB3aWR0aDogMzBweDsgLyog6K6+572u5a695bqm5Li6MzBweCAqLwogICAgICAgICAgICBoZWlnaHQ6IDMwcHg7IC8qIOiuvue9rumrmOW6puS4ujMwcHggKi8KICAgICAgICAgICAgbWFyZ2luOiAwOyAvKiDnp7vpmaTlpJbovrnot50gKi8KICAgICAgICAgICAgcGFkZGluZzogMDsgLyog56e76Zmk5YaF6L656LedICovCiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDdiZmY7IC8qIOaMiemSruiDjOaZr+iJsiAqLwogICAgICAgICAgICBjb2xvcjogd2hpdGU7IC8qIOaMiemSruWtl+S9k+minOiJsiAqLwogICAgICAgICAgICBib3JkZXI6IG5vbmU7IC8qIOWOu+aOiei+ueahhiAqLwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1MCU7IC8qIOiuvue9ruS4uuWchuW9oiAqLwogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7IC8qIOWtl+S9k+Wkp+WwjyAqLwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7IC8qIOm8oOagh+aMh+mSiOagt+W8jyAqLwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OyAvKiDkvb/nlKhGbGV4Ym945bGF5Lit5YaF5a65ICovCiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7IC8qIOWeguebtOWxheS4rSAqLwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgLyog5rC05bmz5bGF5LitICovCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcywgYm94LXNoYWRvdyAwLjNzLCB0cmFuc2Zvcm0gMC4zczsgLyog5re75Yqg6L+H5rih5pWI5p6cICovCiAgICAgICAgfQoKICAgICAgICAjR2l0SHViSWNvbjpob3ZlciB7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICMwMDU2YjM7IC8qIOaCrOWBnOaXtuiDjOaZr+iJsiAqLwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwgMTIzLCAyNTUsIDAuNSk7IC8qIOaCrOWBnOaXtumYtOW9sSAqLwogICAgICAgICAgICB0cmFuc2Zvcm06IHNjYWxlKDEuMSk7IC8qIOaCrOWBnOaXtuaUvuWkpyAqLwogICAgICAgIH0KCgogICAgICAgIGltZ3sKICAgICAgICAgICAgbWF4LXdpZHRoOiAyNTZweDsKICAgICAgICB9CiAgICAgICAgLmJ2YW1iaWVudF9wYXJ0aWNsZQogICAgICAgIHsKICAgICAgICAgICAgcG9zaXRpb246IGFic29sdXRlOwogICAgICAgICAgICBwb2ludGVyLWV2ZW50czogbm9uZTsKICAgICAgICAgICAgdHJhbnNpdGlvbjogdG9wIGxpbmVhciwgbGVmdCBsaW5lYXI7CgogICAgICAgIH0KCiAgICAgICAgI2FtYmllbnQgewogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOwogICAgICAgICAgICBwb3NpdGlvbjogYWJzb2x1dGU7CiAgICAgICAgICAgIHdpZHRoOiAxMDAlOwogICAgICAgICAgICBoZWlnaHQ6IDEwMHZoOwogICAgICAgICAgICB6LWluZGV4OiAtMTsgLyog5bCG5YWD57Sg572u5LqO5pyA5bqV5bGCICovCiAgICAgICAgfQogICAgICAgICNxcmNvZGUgewoKCiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOyAvKiDnoa7kv53mmK/lnZfnuqflhYPntKAgKi8KICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87IC8qIOWxheS4reaYvuekuiAqLwogICAgICAgICAgICBvdmVyZmxvdzogaGlkZGVuOyAvKiDpmLLmraLlhoXlrrnmuqLlh7ogKi8KICAgICAgICB9CgogICAgICAgICogewogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDA7CiAgICAgICAgICAgIGJveC1zaXppbmc6IGJvcmRlci1ib3g7IC8qIOS9v+WuveW6puWSjOmrmOW6puiuoeeul+WMheaLrOWGhei+uei3nSAqLwogICAgICAgIH0KCiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAiTm90byBTYW5zIiwgIk5vdG8gU2FucyBTQyIsIHNlcmlmOwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiBibGFjazsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgYWxpZ24taXRlbXM6IGNlbnRlcjsgLyog5rC05bmz5bGF5LitICovCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOyAvKiDlnoLnm7TlsYXkuK0gKi8KICAgICAgICAgICAgaGVpZ2h0OiAxMDB2aDsgLyog6KeG5Y+j6auY5bqmICovCiAgICAgICAgICAgIG1hcmdpbjogMDsgLyog5Y675o6J6buY6K6k55qE6L656LedICovCgogICAgICAgIH0KCgogICAgICAgIGgxIHsKICAgICAgICAgICAgZm9udC1zaXplOiAzMHB4OwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IC8qIOagh+mimOWxheS4rSAqLwogICAgICAgICAgICBjb2xvcjogYmxhY2s7IC8qIOWtl+S9k+minOiJsiAqLwogICAgICAgICAgICBtYXJnaW46IDEwcHg7IC8qIOi+uei3nSAqLwogICAgICAgIH0KCiAgICAgICAgaDIgewogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IC8qIOagh+mimOWxheS4rSAqLwogICAgICAgICAgICBjb2xvcjogYmxhY2s7IC8qIOWtl+S9k+minOiJsiAqLwogICAgICAgICAgICBtYXJnaW46IDEwcHg7IC8qIOi+uei3nSAqLwogICAgICAgIH0KCiAgICAgICAgaDMgewogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IC8qIOagh+mimOWxheS4rSAqLwogICAgICAgICAgICBjb2xvcjogYmxhY2s7IC8qIOWtl+S9k+minOiJsiAqLwogICAgICAgICAgICBtYXJnaW46IDEwcHg7IC8qIOi+uei3nSAqLwogICAgICAgIH0KCgogICAgICAgIC5pbnB1dC1ncm91cCB7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7IC8qIOS9v+eUqOW8ueaAp+W4g+WxgCAqLwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgLyog5bGF5Lit5a+56b2QICovCiAgICAgICAgICAgIG1hcmdpbi1ib3R0b206IDIwcHg7IC8qIOS4i+i+uei3nSAqLwogICAgICAgIH0KCiAgICAgICAgbGFiZWwgewogICAgICAgICAgICBmb250LXNpemU6IDE4cHg7IC8qIOagh+etvuWtl+S9k+Wkp+WwjyAqLwogICAgICAgICAgICBtYXJnaW46IDEwcHg7IC8qIOi+uei3nSAqLwogICAgICAgICAgICBhbGlnbi1zZWxmOiBjZW50ZXI7IC8qIOWeguebtOWxheS4rSAqLwogICAgICAgIH0KCgogICAgICAgIGlucHV0W3R5cGU9InRleHQiXSB7CiAgICAgICAgICAgIG1hcmdpbjogMTBweDsgLyog5q+P5Liq5oyJ6ZKu5ZGo5Zu05pyJMTBweOeahOmXtOi3nSAqLwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4OyAvKiDlhoXovrnot50gKi8KICAgICAgICAgICAgYm9yZGVyOiAycHggc29saWQgIzAwN2JmZjsgLyog6L655qGG6aKc6ImyICovCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7IC8qIOWchuinkiAqLwogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7IC8qIOWtl+S9k+Wkp+WwjyAqLwogICAgICAgICAgICB3aWR0aDogMjAwcHg7IC8qIOi+k+WFpeahhuWuveW6piAqLwogICAgICAgICAgICB0cmFuc2l0aW9uOiBib3JkZXItY29sb3IgMC4zcywgYm94LXNoYWRvdyAwLjNzLCB0cmFuc2Zvcm0gMC4zczsgLyog5re75Yqg6L+H5rih5pWI5p6cICovCiAgICAgICAgfQoKICAgICAgICBpbnB1dFt0eXBlPSJ0ZXh0Il06Zm9jdXMgewogICAgICAgICAgICBib3JkZXItY29sb3I6ICMwMDU2YjM7IC8qIOiBmueEpuaXtui+ueahhuminOiJsiAqLwogICAgICAgICAgICBvdXRsaW5lOiBub25lOyAvKiDljrvmjonpu5jorqTnmoTova7lu5MgKi8KICAgICAgICAgICAgYm94LXNoYWRvdzogMCAwIDVweCByZ2JhKDAsIDEyMywgMjU1LCAwLjUpOyAvKiDogZrnhKbml7bpmLTlvbEgKi8KICAgICAgICB9CgogICAgICAgIGlucHV0W3R5cGU9InRleHQiXTpob3ZlciB7CiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgwLCAxMjMsIDI1NSwgMC41KTsgLyog5oKs5YGc5pe26Zi05b2xICovCiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsgLyog5oKs5YGc5pe25LiK56e7ICovCiAgICAgICAgfQoKICAgICAgICBidXR0b24gewogICAgICAgICAgICBmb250LWZhbWlseTogIlpDT09MIEt1YWlMZSIsIHNlcmlmOwogICAgICAgICAgICBtYXJnaW46IDEwcHg7IC8qIOavj+S4quaMiemSruWRqOWbtOaciTEwcHjnmoTpl7Tot50gKi8KICAgICAgICAgICAgcGFkZGluZzogMTBweCAxNXB4OyAvKiDlhoXovrnot50gKi8KICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwN2JmZjsgLyog5oyJ6ZKu6IOM5pmv6ImyICovCiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsgLyog5oyJ6ZKu5a2X5L2T6aKc6ImyICovCiAgICAgICAgICAgIGJvcmRlcjogbm9uZTsgLyog5Y675o6J6L655qGGICovCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDEwcHg7IC8qIOWchuinkiAqLwogICAgICAgICAgICBmb250LXNpemU6IDE2cHg7IC8qIOWtl+S9k+Wkp+WwjyAqLwogICAgICAgICAgICBjdXJzb3I6IHBvaW50ZXI7IC8qIOm8oOagh+aMh+mSiOagt+W8jyAqLwogICAgICAgICAgICB0cmFuc2l0aW9uOiBiYWNrZ3JvdW5kLWNvbG9yIDAuM3MsIGJveC1zaGFkb3cgMC4zcywgdHJhbnNmb3JtIDAuM3M7IC8qIOa3u+WKoOi/h+a4oeaViOaenCAqLwogICAgICAgIH0KCiAgICAgICAgYnV0dG9uOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzAwNTZiMzsgLyog5oKs5YGc5pe26IOM5pmv6ImyICovCiAgICAgICAgICAgIGJveC1zaGFkb3c6IDAgNHB4IDE1cHggcmdiYSgwLCAxMjMsIDI1NSwgMC41KTsgLyog5oKs5YGc5pe26Zi05b2xICovCiAgICAgICAgICAgIHRyYW5zZm9ybTogc2NhbGUoMS4xKTsgLyog5oKs5YGc5pe25pS+5aSnICovCiAgICAgICAgfQoKCiAgICAgICAgLmNhcmQtYmFjayB7CgogICAgICAgICAgICBwYWRkaW5nOiAyMHB4OyAvKiDlhoXovrnot50gKi8KICAgICAgICAgICAgZGlzcGxheTogZmxleDsKICAgICAgICAgICAgZmxleC1kaXJlY3Rpb246IGNvbHVtbjsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsIDAsIDAsIDAuMik7IC8qIOmYtOW9seaViOaenCAqLwogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IC8qIOaWh+acrOWxheS4rSAqLwogICAgICAgICAgICBiYWNrZ3JvdW5kOiBsaW5lYXItZ3JhZGllbnQodG8gcmlnaHQsIHJnYmEoNTAsIDUwLCA1MCwgMSksIHJnYmEoMjExLCAyMTEsIDIxMSwgMSkpOyAvKiDmm7Tmt6HnmoTpu5HliLDmtYXngbDnmoTmuJDlj5ggKi8KCgogICAgICAgICAgICBib3JkZXItcmFkaXVzOiAxNXB4OwogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjMDA3YmZmOyAvKiDovrnmoYbpopzoibIgKi8KICAgICAgICB9CgoKICAgIDwvc3R5bGU+Cgo8L2hlYWQ+Cjxib2R5Pgo8ZGl2IGlkPSJhbWJpZW50Ij48L2Rpdj4KCjxzY3JpcHQ+CiAgICAvKi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0KCkJWQW1iaWVudCAtIFZhbmlsbGFKUyBQYXJ0aWNsZSBCYWNrZ3JvdW5kCmh0dHBzOi8vYm1zdmllaXJhLmdpdGh1Yi5pby9CVkFtYmllbnQvCgpNYWRlIGJ5OiBCcnVubyBWaWVpcmEKCi0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLS0tLSAqLwoKICAgIHZhciBpc1BhdXNlZCA9IGZhbHNlOwoKICAgIGNsYXNzIEJWQW1iaWVudCB7CgogICAgICAgIGNvbnN0cnVjdG9yKHsKICAgICAgICAgICAgICAgICAgICAgICAgc2VsZWN0b3IgPSAnZGVmYXVsdElkJywKICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVfbnVtYmVyID0gIjUwIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVfbWF4d2lkdGggPSAiMzAiLAogICAgICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZV9taW53aWR0aCA9ICI1IiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVfcmFkaXVzID0gIjUwIiwKICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVfb3BhY2l0eSA9IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlX2NvbGlzaW9uX2NoYW5nZSA9IHRydWUsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlX2JhY2tncm91bmQgPSAiI2VkZWRlZCIsCiAgICAgICAgICAgICAgICAgICAgICAgIHBhcnRpY2xlX2ltYWdlID0gewogICAgICAgICAgICAgICAgICAgICAgICAgICAgaW1hZ2U6IGZhbHNlLAogICAgICAgICAgICAgICAgICAgICAgICAgICAgc3JjOiAiIgogICAgICAgICAgICAgICAgICAgICAgICB9LAogICAgICAgICAgICAgICAgICAgICAgICByZXNwb25zaXZlID0gWwogICAgICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrcG9pbnQ6ICJkZWZhdWx0IgogICAgICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBdLAogICAgICAgICAgICAgICAgICAgICAgICBmcHMgPSAiNjAiLAogICAgICAgICAgICAgICAgICAgICAgICBtYXhfdHJhbnNpdGlvbl9zcGVlZCA9IDEyMDAwLAogICAgICAgICAgICAgICAgICAgICAgICBtaW5fdHJhbnNpdGlvbl9zcGVlZCA9IDgwMDAsCiAgICAgICAgICAgICAgICAgICAgICAgIHJlZnJlc2hfb25mb2N1cyA9IHRydWUKICAgICAgICAgICAgICAgICAgICB9KQogICAgICAgIHsKICAgICAgICAgICAgLy8gRGVmaW5lIFZhcmlhYmxlcwogICAgICAgICAgICB0aGlzLnNlbGVjdG9yID0gc2VsZWN0b3Iuc3Vic3RyaW5nKDEpOwogICAgICAgICAgICB0aGlzLnBhcnRpY2xlX251bWJlciA9IHBhcnRpY2xlX251bWJlcjsKICAgICAgICAgICAgdGhpcy5mcHMgPSBmcHM7CiAgICAgICAgICAgIHRoaXMubWF4X3RyYW5zaXRpb25fc3BlZWQgPSBtYXhfdHJhbnNpdGlvbl9zcGVlZCwKICAgICAgICAgICAgICAgIHRoaXMubWluX3RyYW5zaXRpb25fc3BlZWQgPSBtaW5fdHJhbnNpdGlvbl9zcGVlZCwKICAgICAgICAgICAgICAgIHRoaXMucGFydGljbGVfbWF4d2lkdGggPSBwYXJ0aWNsZV9tYXh3aWR0aDsKICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZV9taW53aWR0aCA9IHBhcnRpY2xlX21pbndpZHRoOwogICAgICAgICAgICB0aGlzLnBhcnRpY2xlX3JhZGl1cyA9IHBhcnRpY2xlX3JhZGl1czsKICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZV9jb2xpc2lvbl9jaGFuZ2UgPSBwYXJ0aWNsZV9jb2xpc2lvbl9jaGFuZ2U7CiAgICAgICAgICAgIHRoaXMucGFydGljbGVfYmFja2dyb3VuZCA9IHBhcnRpY2xlX2JhY2tncm91bmQ7CiAgICAgICAgICAgIHRoaXMucGFydGljbGVfaW1hZ2UgPSBwYXJ0aWNsZV9pbWFnZTsKICAgICAgICAgICAgdGhpcy5yZXNwb25zaXZlID0gcmVzcG9uc2l2ZTsKICAgICAgICAgICAgdGhpcy5wYXJ0aWNsZV9vcGFjaXR5ID0gcGFydGljbGVfb3BhY2l0eTsKICAgICAgICAgICAgdGhpcy5yZWZyZXNoX29uZm9jdXMgPSByZWZyZXNoX29uZm9jdXM7CgogICAgICAgICAgICAvLyBHbG9iYWwgVmFyaWFibGVzCiAgICAgICAgICAgIHZhciByYW5kb21JRCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICg5OTk5IC0gMCArIDEpKSArIDA7CiAgICAgICAgICAgIHZhciBzZWxlY3RvciA9IHRoaXMuc2VsZWN0b3I7CiAgICAgICAgICAgIHZhciBmcHMgPSB0aGlzLmZwczsKICAgICAgICAgICAgdmFyIGlzUGxheWluZyA9IHRydWU7CiAgICAgICAgICAgIHZhciBwYXJ0aWNsZV9tYXh3aWR0aCA9IHRoaXMucGFydGljbGVfbWF4d2lkdGg7CiAgICAgICAgICAgIHZhciBwYXJ0aWNsZV9taW53aWR0aCA9IHRoaXMucGFydGljbGVfbWlud2lkdGg7CiAgICAgICAgICAgIHZhciBwYXJ0aWNsZV9yYWRpdXMgPSB0aGlzLnBhcnRpY2xlX3JhZGl1czsKICAgICAgICAgICAgdmFyIHBhcnRpY2xlX2NvbGlzaW9uX2NoYW5nZSA9IHRoaXMucGFydGljbGVfY29saXNpb25fY2hhbmdlOwogICAgICAgICAgICB2YXIgcGFydGljbGVfYmFja2dyb3VuZCA9IHRoaXMucGFydGljbGVfYmFja2dyb3VuZDsKICAgICAgICAgICAgdmFyIHBhcnRpY2xlX2ltYWdlID0gdGhpcy5wYXJ0aWNsZV9pbWFnZTsKICAgICAgICAgICAgdmFyIHJlc3BvbnNpdmUgPSB0aGlzLnJlc3BvbnNpdmU7CiAgICAgICAgICAgIHZhciBwYXJ0aWNsZV9vcGFjaXR5ID0gdGhpcy5wYXJ0aWNsZV9vcGFjaXR5OwogICAgICAgICAgICB2YXIgdHJhaWxfY291bnQgPSAwOwogICAgICAgICAgICB2YXIgbWF4X3RyYW5zaXRpb25fc3BlZWQgPSB0aGlzLm1heF90cmFuc2l0aW9uX3NwZWVkOwogICAgICAgICAgICB2YXIgbWluX3RyYW5zaXRpb25fc3BlZWQgPSB0aGlzLm1pbl90cmFuc2l0aW9uX3NwZWVkOwogICAgICAgICAgICB2YXIgcmVmcmVzaF9vbmZvY3VzID0gdGhpcy5yZWZyZXNoX29uZm9jdXM7CgogICAgICAgICAgICB2YXIgcGFydGljbGVfeF9yYXkgPSBbXTsKCiAgICAgICAgICAgIC8vIEFkZCBtb3ZlbWVudCB0byBwYXJ0aWNsZQogICAgICAgICAgICB0aGlzLk1vdmVQYXJ0aWNsZSA9IGZ1bmN0aW9uKGVsZW1lbnQpIHsKCiAgICAgICAgICAgICAgICB2YXIgaXNyZXN0aW5nID0gMTsKCiAgICAgICAgICAgICAgICAvLyBNb3ZpbmcgRGlyZWN0aW9ucwogICAgICAgICAgICAgICAgdmFyIHRvcF9kb3duID0gWyd0b3AnLCAiZG93biJdOwogICAgICAgICAgICAgICAgdmFyIGxlZnRfcmlnaHQgPSBbImxlZnQiLCAicmlnaHQiXTsKCiAgICAgICAgICAgICAgICAvLyBSYW5kb20gdmFsdWUgdG8gZGVjaWRlIHdpY2ggZGlyZWN0aW9uIGZvbGxvdwogICAgICAgICAgICAgICAgdmFyIGRpcmVjdGlvbl9oID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKDEgLSAwICsgMSkpICsgMDsKICAgICAgICAgICAgICAgIHZhciBkaXJlY3Rpb25fdiA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICgxIC0gMCArIDEpKSArIDA7CgogICAgICAgICAgICAgICAgLy8gRGlyZWN0aW9uCiAgICAgICAgICAgICAgICB2YXIgZF9oID0gbGVmdF9yaWdodFtkaXJlY3Rpb25faF07CiAgICAgICAgICAgICAgICB2YXIgZF92ID0gdG9wX2Rvd25bZGlyZWN0aW9uX3ZdOwoKICAgICAgICAgICAgICAgIHZhciBwb3MgPSAwLCB2ZXIgPSAwLCBlbGVtZW50X3dpZHRoID0gZWxlbWVudC5vZmZzZXRXaWR0aDsKICAgICAgICAgICAgICAgIHZhciByZWN0X21haW4gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3Rvcik7CgogICAgICAgICAgICAgICAgLy8gQ2hhbmdlIHBhcnRpY2xlIHNpemUKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIENoYW5nZVBhcnRpY2xlKHBhcnRpY2xlKQogICAgICAgICAgICAgICAgewoKICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBpZiByYW5kb20gY29sb3IgaXMgZW5hYmxlZCwgY2hhbmdlIHBhcnRpY2xlIGNvbG9yIHdoZW4gY29saWRlcwogICAgICAgICAgICAgICAgICAgIGlmKHBhcnRpY2xlX2JhY2tncm91bmQgPT0gInJhbmRvbSIpIHsgcGFydGljbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gZ2V0UmFuZG9tQ29sb3IoKTsgfQoKICAgICAgICAgICAgICAgICAgICAvLyBHZXQgcmFuZG9tIG51bWJlciBiYXNlZCBvbiB0aGUgd2lkdGggYW5kIGhlaWdodCBvZiBtYWluIGRpdgogICAgICAgICAgICAgICAgICAgIHZhciBSYW5kb21XaWR0aCA9IE1hdGgucmFuZG9tKCkgKiAocGFydGljbGVfbWF4d2lkdGggLSBwYXJ0aWNsZV9taW53aWR0aCkgKyBwYXJ0aWNsZV9taW53aWR0aDsKICAgICAgICAgICAgICAgICAgICBwYXJ0aWNsZS5zdHlsZS53aWR0aCA9IFJhbmRvbVdpZHRoKyJweCI7CiAgICAgICAgICAgICAgICAgICAgcGFydGljbGUuc3R5bGUuaGVpZ2h0ID0gUmFuZG9tV2lkdGgrInB4IjsKCiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gU2V0IGZyYW1lIHRvIG1vdmUgcGFydGljbGUKICAgICAgICAgICAgICAgIGZ1bmN0aW9uIFNldEZyYW1lKCkgewoKICAgICAgICAgICAgICAgICAgICBpZiAoaXNQbGF5aW5nKSBzZXRUaW1lb3V0KFNldEZyYW1lLCAxMDAwIC8gZnBzKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gRWxlbWVudCBvZmZzZXQgcG9zaXRpb25pbmcKICAgICAgICAgICAgICAgICAgICBwb3MgPSBlbGVtZW50Lm9mZnNldFRvcDsKICAgICAgICAgICAgICAgICAgICB2ZXIgPSBlbGVtZW50Lm9mZnNldExlZnQ7CgogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGNvbGlzaW9uIGJvdW5kcwogICAgICAgICAgICAgICAgICAgIGlmKHBvcyA9PSByZWN0X21haW4ub2Zmc2V0SGVpZ2h0LWVsZW1lbnRfd2lkdGgpIHsKICAgICAgICAgICAgICAgICAgICAgICAgZF92ID0gInRvcCI7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IHJlY3RfbWFpbi5vZmZzZXRIZWlnaHQtZWxlbWVudF93aWR0aDsKICAgICAgICAgICAgICAgICAgICAgICAgaXNyZXN0aW5nID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFydGljbGVfY29saXNpb25fY2hhbmdlID09IHRydWUpIHsgQ2hhbmdlUGFydGljbGUoZWxlbWVudCk7IH0gLy8gQ2hhbmdlIFBhcnRpY2xlIFNpemUgb24gY29saXNpb24KICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgaWYocG9zIDw9IDApewogICAgICAgICAgICAgICAgICAgICAgICBkX3YgPSAiZG93biI7CiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzcmVzdGluZyA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBhcnRpY2xlX2NvbGlzaW9uX2NoYW5nZSA9PSB0cnVlKSB7IENoYW5nZVBhcnRpY2xlKGVsZW1lbnQpOyB9IC8vIENoYW5nZSBQYXJ0aWNsZSBTaXplIG9uIGNvbGlzaW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKHZlciA9PSByZWN0X21haW4ub2Zmc2V0V2lkdGgtZWxlbWVudF93aWR0aCl7CiAgICAgICAgICAgICAgICAgICAgICAgIGRfaCA9ICJsZWZ0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdmVyID0gcmVjdF9tYWluLm9mZnNldFdpZHRoLWVsZW1lbnRfd2lkdGg7CiAgICAgICAgICAgICAgICAgICAgICAgIGlzcmVzdGluZyA9IDE7CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKHBhcnRpY2xlX2NvbGlzaW9uX2NoYW5nZSA9PSB0cnVlKSB7IENoYW5nZVBhcnRpY2xlKGVsZW1lbnQpOyB9IC8vIENoYW5nZSBQYXJ0aWNsZSBTaXplIG9uIGNvbGlzaW9uCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgIGlmKHZlciA8PSAwKXsKICAgICAgICAgICAgICAgICAgICAgICAgZF9oID0gInJpZ2h0IjsKICAgICAgICAgICAgICAgICAgICAgICAgdmVyID0gMDsKICAgICAgICAgICAgICAgICAgICAgICAgaXNyZXN0aW5nID0gMTsKICAgICAgICAgICAgICAgICAgICAgICAgaWYocGFydGljbGVfY29saXNpb25fY2hhbmdlID09IHRydWUpIHsgQ2hhbmdlUGFydGljbGUoZWxlbWVudCk7IH0gLy8gQ2hhbmdlIFBhcnRpY2xlIFNpemUgb24gY29saXNpb24KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIEl0IHdvbiBhZGQgYW5vdGhlciBwb3NpdGlvbiB1bnRpbCB0aGUgZW5kIG9mIHRyYW5zaXRpb24KICAgICAgICAgICAgICAgICAgICBpZihpc3Jlc3RpbmcgPT0gMSkKICAgICAgICAgICAgICAgICAgICB7CgogICAgICAgICAgICAgICAgICAgICAgICB2YXIgUmFuZG9tVHJhbnNpdGlvblRpbWUgPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAobWF4X3RyYW5zaXRpb25fc3BlZWQgLSBtaW5fdHJhbnNpdGlvbl9zcGVlZCArIDEpKSArIG1pbl90cmFuc2l0aW9uX3NwZWVkOwogICAgICAgICAgICAgICAgICAgICAgICBlbGVtZW50LnN0eWxlLnRyYW5zaXRpb25EdXJhdGlvbiA9IFJhbmRvbVRyYW5zaXRpb25UaW1lKyJtcyI7CgogICAgICAgICAgICAgICAgICAgICAgICAvLyBDaGVjayBQb3NpdGlvbgogICAgICAgICAgICAgICAgICAgICAgICBpZihkX3YgPT0gImRvd24iICYmIGRfaCA9PSAnbGVmdCcpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IE51bWJlcihlbGVtZW50Lm9mZnNldExlZnQpIC0gTnVtYmVyKDMwMCkgKyAicHgiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSByZWN0X21haW4ub2Zmc2V0SGVpZ2h0LU51bWJlcihlbGVtZW50X3dpZHRoKSArICJweCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3Jlc3RpbmcgPSAwOwogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRfdiA9PSAiZG93biIgJiYgZF9oID09ICdyaWdodCcpCiAgICAgICAgICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuc3R5bGUubGVmdCA9IE51bWJlcihlbGVtZW50Lm9mZnNldExlZnQpICsgTnVtYmVyKDMwMCkgKyAicHgiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSByZWN0X21haW4ub2Zmc2V0SGVpZ2h0LU51bWJlcihlbGVtZW50X3dpZHRoKSArICJweCI7CiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpc3Jlc3RpbmcgPSAwOwoKICAgICAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgICAgICAgICBpZihkX3YgPT0gInRvcCIgJiYgZF9oID09ICdsZWZ0JykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gTnVtYmVyKGVsZW1lbnQub2Zmc2V0TGVmdCktTnVtYmVyKGVsZW1lbnRfd2lkdGgpIC0gTnVtYmVyKDMwMCkgKyAicHgiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSAiMHB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzcmVzdGluZyA9IDA7CgogICAgICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICAgICAgICAgIGlmKGRfdiA9PSAidG9wIiAmJiBkX2ggPT0gJ3JpZ2h0JykKICAgICAgICAgICAgICAgICAgICAgICAgewogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS5sZWZ0ID0gTnVtYmVyKGVsZW1lbnQub2Zmc2V0TGVmdCktTnVtYmVyKGVsZW1lbnRfd2lkdGgpICsgTnVtYmVyKDMwMCkgKyAicHgiOwogICAgICAgICAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5zdHlsZS50b3AgPSAiMHB4IjsKICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzcmVzdGluZyA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgICAgIC8vIFNhdmVzIHBhcnRpY2xlIHBvc2l0aW9uIHRvIGFycmF5CiAgICAgICAgICAgICAgICAgICAgaWYoZWxlbWVudC5vZmZzZXRMZWZ0ICE9IDAgJiYgZWxlbWVudC5vZmZzZXRUb3AgIT0gMCkgeyBwYXJ0aWNsZV94X3JheVtlbGVtZW50LmlkXSA9ICh7J2lkJzogZWxlbWVudC5pZCwgJ3gnOiBlbGVtZW50Lm9mZnNldExlZnQsICd5JzogZWxlbWVudC5vZmZzZXRUb3B9KTsgfQoKICAgICAgICAgICAgICAgIH0KCiAgICAgICAgICAgICAgICAvLyBDYWxsIGZ1bmN0aW9uIGZvciB0aGUgZmlyc3QgdGltZQogICAgICAgICAgICAgICAgU2V0RnJhbWUoKTsKICAgICAgICAgICAgfTsKCiAgICAgICAgICAgIC8vIFNldCB1cCBwYXJ0aWNsZXMgdG8gc2VsZWN0b3IgZGl2CiAgICAgICAgICAgIHRoaXMuU2V0dXBQYXJ0aWNsZXMgPSBmdW5jdGlvbihudW1iZXIpIHsKCiAgICAgICAgICAgICAgICB2YXIgcmVzcF9wYXJ0aWNsZXM7CiAgICAgICAgICAgICAgICBwYXJ0aWNsZV94X3JheSA9IFtdOwoKICAgICAgICAgICAgICAgIC8vIEdldCB3aW5kb3cgdmlld3BvcnQgaW5uZXIgd2lkdGgKICAgICAgICAgICAgICAgIHZhciB3aW5kb3dWaWV3cG9ydFdpZHRoID0gd2luZG93LmlubmVyV2lkdGg7CgogICAgICAgICAgICAgICAgLy8gSWYgZnVuY3Rpb25zIGJyaW5ncyBubyBudW1iZXIsIGl0IGZvbGxvdyB0aGUgZGVmYXVsdAogICAgICAgICAgICAgICAgaWYobnVtYmVyID09IHVuZGVmaW5lZCkKICAgICAgICAgICAgICAgIHsKCiAgICAgICAgICAgICAgICAgICAgLy8gTG9vcCByZXNwb25zaXZlIG9iamVjdCB0byBnZXQgY3VycmVudCB2aWV3cG9ydAogICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGxvb3AgPSAwOyBsb29wIDwgcmVzcG9uc2l2ZS5sZW5ndGg7IGxvb3ArKykgewogICAgICAgICAgICAgICAgICAgICAgICBpZihyZXNwb25zaXZlW2xvb3BdLmJyZWFrcG9pbnQgPj0gd2luZG93Vmlld3BvcnRXaWR0aCkgeyByZXNwX3BhcnRpY2xlcyA9IHJlc3BvbnNpdmVbbG9vcF1bInNldHRpbmdzIl0ucGFydGljbGVfbnVtYmVyOyB9CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICAvLyBJZiB0aGVyZSBpcyBubyByZXN1bHQgZnJvbSBhYm92ZSwgZGVmYXVsdCBwYXJ0aWNsZXMgYXJlIGFwcGxpZWQKICAgICAgICAgICAgICAgICAgICBpZihyZXNwX3BhcnRpY2xlcyA9PSB1bmRlZmluZWQpIHsgcmVzcF9wYXJ0aWNsZXMgPSB0aGlzLnBhcnRpY2xlX251bWJlcjsgfQoKICAgICAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICAgICAgcmVzcF9wYXJ0aWNsZXMgPSBudW1iZXI7CiAgICAgICAgICAgICAgICB9CgogICAgICAgICAgICAgICAgLy8gQWRkIG51bWJlciBvZiBwYXJ0aWNsZXMgdG8gc2VsZWN0b3IgZGl2CiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gMTsgaSA8PSByZXNwX3BhcnRpY2xlczsgaSsrKSB7CgogICAgICAgICAgICAgICAgICAgIC8vIEdlbmVyYXRlIHJhbmRvbSBudW1iZXIgdG8gcGFydGljbGVzCiAgICAgICAgICAgICAgICAgICAgdmFyIHJhbmRvbV9pZF9wYXJ0aWNsZSA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqICg5OTk5IC0gMCArIDEpKSArIDA7CgogICAgICAgICAgICAgICAgICAgIC8vIENoZWNrIGlmIGltYWdlIHNvdXJjZSBpcyBlbXB0eSBhbmQgYXBwZW5kIHBhcnRpY2xlIHRvIG1haW4gZGl2CiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5wYXJ0aWNsZV9pbWFnZVsnaW1hZ2UnXSA9PSBmYWxzZSkKICAgICAgICAgICAgICAgICAgICB7CiAgICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuc2VsZWN0b3IpLmluc2VydEFkamFjZW50SFRNTCgnYmVmb3JlZW5kJywgIjxkaXYgaWQ9J2J2cGFydGljbGVfIityYW5kb21faWRfcGFydGljbGUrIicgY2xhc3M9J2J2YW1iaWVudF9wYXJ0aWNsZScgc3R5bGU9J2Rpc3BsYXk6IGJsb2NrOyc+PC9kaXY+Iik7CiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZWxlY3RvcikuaW5zZXJ0QWRqYWNlbnRIVE1MKCdiZWZvcmVlbmQnLCAiPGltZyBzcmM9JyIrdGhpcy5wYXJ0aWNsZV9pbWFnZVsnc3JjJ10rIicgaWQ9J2J2cGFydGljbGVfIityYW5kb21faWRfcGFydGljbGUrIicgY2xhc3M9J2J2YW1iaWVudF9wYXJ0aWNsZScgc3R5bGU9J2Rpc3BsYXk6IGJsb2NrOyc+Iik7CiAgICAgICAgICAgICAgICAgICAgfQoKICAgICAgICAgICAgICAgICAgICB2YXIgYnZwYXJ0aWNsZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJidnBhcnRpY2xlXyIrcmFuZG9tX2lkX3BhcnRpY2xlKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gQWRkCiAgICAgICAgICAgICAgICAgICAgcGFydGljbGVfeF9yYXkucHVzaCgiYnZwYXJ0aWNsZV8iK3JhbmRvbV9pZF9wYXJ0aWNsZSk7CgogICAgICAgICAgICAgICAgICAgIC8vIEdldCBXaWR0aCBhbmQgSGVpZ2h0IG9mIG1haW4gZGl2CiAgICAgICAgICAgICAgICAgICAgdmFyIHdpZHRoTWFpbkRpdiA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHNlbGVjdG9yKTsKCiAgICAgICAgICAgICAgICAgICAgLy8gR2V0IHJhbmRvbSBudW1iZXIgYmFzZWQgb24gdGhlIHdpZHRoIGFuZCBoZWlnaHQgb2YgbWFpbiBkaXYKICAgICAgICAgICAgICAgICAgICB2YXIgUmFuZG9tVG9wUG9zaXRpb24gPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAod2lkdGhNYWluRGl2Lm9mZnNldEhlaWdodCAtIDQwICsgMSkpICsgMDsKICAgICAgICAgICAgICAgICAgICB2YXIgUmFuZG9tTGVmdFBvc2l0aW9uID0gTWF0aC5mbG9vcihNYXRoLnJhbmRvbSgpICogKHdpZHRoTWFpbkRpdi5vZmZzZXRXaWR0aCAtIDEwMCArIDEpKSArIDA7CgogICAgICAgICAgICAgICAgICAgIC8vIEdldCByYW5kb20gbnVtYmVyIGJhc2VkIG9uIHRoZSB3aWR0aCBhbmQgaGVpZ2h0IG9mIG1haW4gZGl2CiAgICAgICAgICAgICAgICAgICAgdmFyIFJhbmRvbVdpZHRoID0gTWF0aC5yYW5kb20oKSAqICh0aGlzLnBhcnRpY2xlX21heHdpZHRoIC0gdGhpcy5wYXJ0aWNsZV9taW53aWR0aCkgKyB0aGlzLnBhcnRpY2xlX21pbndpZHRoOwoKICAgICAgICAgICAgICAgICAgICAvLyBHZXQgUmFuZG9tIE9wYWNpdHkgYmV0d2VlbiAwLjIgYW5kIDEgaWYgYWN0aXZlCiAgICAgICAgICAgICAgICAgICAgaWYocGFydGljbGVfb3BhY2l0eSA9PSB0cnVlKSB7IHZhciBSYW5kb21PcGFjaXR5ID0gTWF0aC5yYW5kb20oKSAqICgxIC0gMC4yKSArIDAuMjsgfSBlbHNlIHsgdmFyIFJhbmRvbU9wYWNpdHkgPSAxOyB9CgogICAgICAgICAgICAgICAgICAgIC8vIEFkZCByYW5kb20gcG9zaXRpb25pbmcgdG8gcGFydGljbGUKICAgICAgICAgICAgICAgICAgICBidnBhcnRpY2xlLnN0eWxlLnRvcCA9IFJhbmRvbVRvcFBvc2l0aW9uKyJweCI7CiAgICAgICAgICAgICAgICAgICAgYnZwYXJ0aWNsZS5zdHlsZS5sZWZ0ID0gUmFuZG9tTGVmdFBvc2l0aW9uKyJweCI7CiAgICAgICAgICAgICAgICAgICAgYnZwYXJ0aWNsZS5zdHlsZS53aWR0aCA9IFJhbmRvbVdpZHRoKyJweCI7CiAgICAgICAgICAgICAgICAgICAgYnZwYXJ0aWNsZS5zdHlsZS5oZWlnaHQgPSBSYW5kb21XaWR0aCsicHgiOwogICAgICAgICAgICAgICAgICAgIGJ2cGFydGljbGUuc3R5bGUub3BhY2l0eSA9IFJhbmRvbU9wYWNpdHk7CiAgICAgICAgICAgICAgICAgICAgYnZwYXJ0aWNsZS5zdHlsZS5ib3JkZXJSYWRpdXMgPSBwYXJ0aWNsZV9yYWRpdXMrInB4IjsKCiAgICAgICAgICAgICAgICAgICAgLy8gQ2hlY2sgaWYgaXQgaGFzIHJhbmRvbSBjb2xvciBlbmFibGVkCiAgICAgICAgICAgICAgICAgICAgaWYocGFydGljbGVfYmFja2dyb3VuZCA9PSAicmFuZG9tIikgeyBidnBhcnRpY2xlLnN0eWxlLmJhY2tncm91bmRDb2xvciA9IGdldFJhbmRvbUNvbG9yKCk7IH0gZWxzZSB7IGJ2cGFydGljbGUuc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcGFydGljbGVfYmFja2dyb3VuZDsgfQoKICAgICAgICAgICAgICAgICAgICAvLyBNb3ZlIHBhcnRpY2xlCiAgICAgICAgICAgICAgICAgICAgdGhpcy5Nb3ZlUGFydGljbGUoYnZwYXJ0aWNsZSk7CiAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIC8vICoqIFNFVFVQIFNMSURFICoqCiAgICAgICAgICAgIHRoaXMuU2V0dXBQYXJ0aWNsZXMoKTsKCiAgICAgICAgICAgIGlmKHJlZnJlc2hfb25mb2N1cyA9PSB0cnVlKXsKICAgICAgICAgICAgICAgIC8vIFdoZW4gdXNlciBlbnRlcnMgdGFiIGFnYWluIHJlZnJlc2ggcG9zaXRpb24KICAgICAgICAgICAgICAgIGRvY3VtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2ZvY3VzJywgKGUpID0+IHsKICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChzZWxlY3RvcikuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgICAgICAgICAgdGhpcy5TZXR1cFBhcnRpY2xlcygpOwogICAgICAgICAgICAgICAgfSk7fQoKICAgICAgICAgICAgLy8gUmVmcmVzaCByZXN1bHRzCiAgICAgICAgICAgIHRoaXMucGFydGljbGVfeF9yYXkgPSBwYXJ0aWNsZV94X3JheTsKCiAgICAgICAgICAgIC8vIEdlbmVyYXRlcyBhIHJhbmRvbSBoZXggY29sb3IKICAgICAgICAgICAgZnVuY3Rpb24gZ2V0UmFuZG9tQ29sb3IoKSB7CiAgICAgICAgICAgICAgICB2YXIgbGV0dGVycyA9ICcwMTIzNDU2Nzg5QUJDREVGJzsKICAgICAgICAgICAgICAgIHZhciBjb2xvciA9ICcjJzsKICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgNjsgaSsrKSB7CiAgICAgICAgICAgICAgICAgICAgY29sb3IgKz0gbGV0dGVyc1tNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAxNildOwogICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgcmV0dXJuIGNvbG9yOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvLyAqKiBNRVRIT0RTICoqCiAgICAgICAgLy8gUkVGUkVTSCBQQVJUSUNMRVMKICAgICAgICBSZWZyZXNoKCkgewoKICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBwYXJ0aWNsZXMKICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5zZWxlY3RvcikuaW5uZXJIVE1MID0gIiI7CiAgICAgICAgICAgIC8vIFNldHVwIG5ldyBBbWJpZW50CiAgICAgICAgICAgIHRoaXMuU2V0dXBQYXJ0aWNsZXMoKTsKICAgICAgICB9CgogICAgICAgIC8vIERFU1RST1kKICAgICAgICBEZXN0cm95KCkgewoKICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBwYXJ0aWNsZXMgYW5kIHVuYmluZCBhbGwgaXRzIGV2ZW50cwogICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCh0aGlzLnNlbGVjdG9yKS5yZW1vdmUoKTsKICAgICAgICB9CgogICAgICAgIC8vIEFERCBQQVJUSUNMRVMKICAgICAgICBBZGQobnVtYmVyKSB7CiAgICAgICAgICAgIGlmKG51bWJlciAhPSB1bmRlZmluZWQpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIC8vIEFkZCBuZXcgcGFydGljbGVzCiAgICAgICAgICAgICAgICB0aGlzLlNldHVwUGFydGljbGVzKG51bWJlcik7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIFBBVVNFCiAgICAgICAgQ29udHJvbHMoY29tbWFuZCkKICAgICAgICB7CiAgICAgICAgICAgIC8vIENoZWNrIHdoYXQgdHlwZSBvZiBjb21tYW5kIGlzCiAgICAgICAgICAgIHN3aXRjaChjb21tYW5kKSB7CiAgICAgICAgICAgICAgICBjYXNlICJwYXVzZSI6IC8vIFBhdXNlIFBhcnRpY2xlcyBtb3ZpbWVudAogICAgICAgICAgICAgICAgICAgIGlzUGF1c2VkID0gdHJ1ZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGNhc2UgInBsYXkiOiAvLyBSZXN1bWUgUGFydGljbGVzIG1vdmltZW50CiAgICAgICAgICAgICAgICAgICAgaXNQYXVzZWQgPSBmYWxzZTsKICAgICAgICAgICAgICAgICAgICBicmVhazsKICAgICAgICAgICAgICAgIGRlZmF1bHQ6CiAgICAgICAgICAgICAgICAgICAgY29uc29sZS5sb2coIkJWQW1iaWVudCB8IENvbW1hbmQgbm90IHJlY29nbml6ZWQuIik7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIC8vIENIQU5HRSBQQVJUSUNMRVMKICAgICAgICBDaGFuZ2UocHJvcGVydGllcykgewoKICAgICAgICAgICAgLy8gQ2hhbmdlcyBwYXJ0aWNsZXMgYWNjb3JkaW5nIHRvIHByb3BlcnRpZXMgYXZhaWxhYmxlCiAgICAgICAgICAgIGlmKHByb3BlcnRpZXMudHlwZSA9PSAicGFydGljbGVfYmFja2dyb3VuZCIpCiAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5idmFtYmllbnRfcGFydGljbGUnKS5mb3JFYWNoKChpdGVtKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgLy8gQ2hhbmdlIHRvIGNob3NlbiBjb2xvcgogICAgICAgICAgICAgICAgICAgIGl0ZW0uc3R5bGUuYmFja2dyb3VuZENvbG9yID0gcHJvcGVydGllcy52YWx1ZTsKICAgICAgICAgICAgICAgIH0pOwogICAgICAgICAgICB9IGVsc2UgeyBjb25zb2xlLmxvZygiQlZBbWJpZW50IHwgUHJvcGVydGllIG5vdCByZWNvZ25pemVkLiIpOyB9CiAgICAgICAgfQogICAgfQogICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigiRE9NQ29udGVudExvYWRlZCIsIGZ1bmN0aW9uKCkgewogICAgICAgIHZhciBkZW1vMSA9IG5ldyBCVkFtYmllbnQoewogICAgICAgICAgICBzZWxlY3RvcjogIiNhbWJpZW50IiwKICAgICAgICAgICAgZnBzOiA2MCwKICAgICAgICAgICAgbWF4X3RyYW5zaXRpb25fc3BlZWQ6IDEyMDAwLAogICAgICAgICAgICBtaW5fdHJhbnNpdGlvbl9zcGVlZDogODAwMCwKICAgICAgICAgICAgcGFydGljbGVfbnVtYmVyOiAzMCwKICAgICAgICAgICAgcGFydGljbGVfbWF4d2lkdGg6IDYwLAogICAgICAgICAgICBwYXJ0aWNsZV9taW53aWR0aDogMTAsCiAgICAgICAgICAgIHBhcnRpY2xlX3JhZGl1czogNTAsCiAgICAgICAgICAgIHBhcnRpY2xlX29wYWNpdHk6IHRydWUsCiAgICAgICAgICAgIHBhcnRpY2xlX2NvbGlzaW9uX2NoYW5nZTogdHJ1ZSwKICAgICAgICAgICAgcGFydGljbGVfYmFja2dyb3VuZDogIiM1OGM3MGMiLAogICAgICAgICAgICByZWZyZXNoX29uZm9jdXM6IHRydWUsCiAgICAgICAgICAgIHBhcnRpY2xlX2ltYWdlOiB7CiAgICAgICAgICAgICAgICBpbWFnZTogZmFsc2UsCiAgICAgICAgICAgICAgICBzcmM6ICIiCiAgICAgICAgICAgIH0sCiAgICAgICAgICAgIHJlc3BvbnNpdmU6IFsKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA3NjgsCiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVfbnVtYmVyOiAiMTUiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfSwKICAgICAgICAgICAgICAgIHsKICAgICAgICAgICAgICAgICAgICBicmVha3BvaW50OiA0ODAsCiAgICAgICAgICAgICAgICAgICAgc2V0dGluZ3M6IHsKICAgICAgICAgICAgICAgICAgICAgICAgcGFydGljbGVfbnVtYmVyOiAiMTAiCiAgICAgICAgICAgICAgICAgICAgfQogICAgICAgICAgICAgICAgfQogICAgICAgICAgICBdCiAgICAgICAgfSk7CiAgICB9KTsKPC9zY3JpcHQ+CgoKCgo8ZGl2IGNsYXNzPSJjYXJkLWJhY2siPgogICAgPGgxPkNsYXNo6YWN572u6J6N5ZCIPC9oMT4KCiAgICA8IS0tIOino+eggemDqOWIhiAtLT4KICAgIDxkaXYgaWQ9ImlucHV0LWNvbnRhaW5lciI+CiAgICAgICAgPCEtLSDliJ3lp4vovpPlhaXmoYYgLS0+CiAgICAgICAgPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAiPgogICAgICAgICAgICA8aW5wdXQgdHlwZT0idGV4dCIgY2xhc3M9ImlucHV0LWZpZWxkIiBwbGFjZWhvbGRlcj0i57KY6LS06K6i6ZiF6ZO+5o6lIj4KICAgICAgICA8L2Rpdj4KICAgIDwvZGl2PgoKICAgIDxkaXYgY2xhc3M9ImlucHV0LWdyb3VwIj4KICAgICAgICA8YnV0dG9uIG9uY2xpY2s9ImFkZElucHV0KCkiPuKelTwvYnV0dG9uPgogICAgICAgIDxidXR0b24gb25jbGljaz0iY29weUxpbmsoKSI+6J6N5ZCI6YWN572uPC9idXR0b24+CgogICAgPC9kaXY+CgoKICAgIDxkaXYgaWQ9InFyY29kZSI+CiAgICAgICAgPGltZyBzcmM9Imh0dHBzOi8vNGV2ZXJncjguZ2l0aHViLmlvL3Jlc291cmNlcy9pY29uLnBuZyIgYWx0PSLnpLrkvovlm77niYciIGlkPSJyYW5kb20iPgogICAgPC9kaXY+CgoKPC9kaXY+CjxhIGhyZWY9Imh0dHBzOi8vZ2l0aHViLmNvbS80ZXZlcmdyOC93b3JrZXItc3ViLW1lcmdlIiB0YXJnZXQ9Il9ibGFuayI+CiAgICA8aW1nIHNyYz0iaHR0cHM6Ly80ZXZlcmdyOC5naXRodWIuaW8vcmVzb3VyY2VzL2dpdGh1Yi1tYXJrLXdoaXRlLnBuZyIgYWx0PSLpobnnm67lnLDlnYAiIGlkPSJHaXRIdWJJY29uIj4KPC9hPgoKCjxzY3JpcHQ+CiAgICBmdW5jdGlvbiBnZXRSYW5kb21JbWFnZSgpIHsKICAgICAgICB2YXIgdG90YWxJbWFnZXMgPSA1MjsgLy8g5YGH6K6+5pyJMjY45byg5Zu+54mH77yIMDAxLmpwZ+WIsDI2OC5qcGfvvIkKICAgICAgICB2YXIgcmFuZG9tSW5kZXggPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiB0b3RhbEltYWdlcykgKyAxOyAvLyDpmo/mnLrojrflj5bntKLlvJUKICAgICAgICB2YXIgaW1hZ2VQYXRoID0gJ2h0dHBzOi8vNGV2ZXJncjguZ2l0aHViLmlvL3Jlc291cmNlcy9qcGdzLycgKyByYW5kb21JbmRleC50b1N0cmluZygpLnBhZFN0YXJ0KDMsICcwJykgKyAnLmpwZyc7IC8vIOS9v+eUqCBwYWRTdGFydCDlpITnkIbluo/lj7cKICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgncmFuZG9tJykuc3JjID0gaW1hZ2VQYXRoOyAvLyDorr7nva7lm77niYfmupAKICAgIH0KCgoKCgoKCgoKCgogICAgZ2V0UmFuZG9tSW1hZ2UoKTsKCgoKCgoKCgoKCgoKCiAgICBmdW5jdGlvbiBnZW5lcmF0ZVFSQ29kZShsaW5rKSB7CiAgICAgICAgLy8g5riF56m65LmL5YmN55qE5LqM57u056CBCiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoInFyY29kZSIpLmlubmVySFRNTCA9ICIiOwoKICAgICAgICAvLyDnlJ/miJDmlrDnmoTkuoznu7TnoIEKICAgICAgICBuZXcgUVJDb2RlKGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJxcmNvZGUiKSwgewogICAgICAgICAgICB0ZXh0OiBsaW5rLAogICAgICAgICAgICBjb2xvckRhcms6ICIjMDAwMDAwIiwgLy8g5rex6Imy6YOo5YiG6aKc6ImyCiAgICAgICAgICAgIGNvbG9yTGlnaHQ6ICIjZmZmZmZmIiwgLy8g5rWF6Imy6YOo5YiG6aKc6ImyCiAgICAgICAgICAgIGNvcnJlY3RMZXZlbDogUVJDb2RlLkNvcnJlY3RMZXZlbC5IIC8vIOe6oOmUmeetiee6pwogICAgICAgIH0pOwogICAgfQoKCgoKICAgIC8vIOiOt+WPlui+k+WFpeahhuWuueWZqAogICAgY29uc3QgaW5wdXRDb250YWluZXIgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnaW5wdXQtY29udGFpbmVyJyk7CgogICAgLy8g5re75Yqg6L6T5YWl5qGGCiAgICBmdW5jdGlvbiBhZGRJbnB1dCgpIHsKICAgICAgICBpZihkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicXJjb2RlIikpe2RvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJxcmNvZGUiKS5yZW1vdmUoKX0KCiAgICAgICAgY29uc3QgbGFzdElucHV0R3JvdXAgPSBpbnB1dENvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkOwoKCiAgICAgICAgY29uc3QgbmV3SW5wdXRHcm91cCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpOwogICAgICAgIG5ld0lucHV0R3JvdXAuY2xhc3NOYW1lID0gJ2lucHV0LWdyb3VwJzsKCgogICAgICAgIGNvbnN0IG5ld0lucHV0ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnaW5wdXQnKTsKICAgICAgICBuZXdJbnB1dC50eXBlID0gJ3RleHQnOwogICAgICAgIG5ld0lucHV0LmNsYXNzTmFtZSA9ICdpbnB1dC1maWVsZCc7CiAgICAgICAgbmV3SW5wdXQucGxhY2Vob2xkZXIgPSAn57KY6LS06K6i6ZiF6ZO+5o6lJzsKCiAgICAgICAgY29uc3QgY29tbWFCdXR0b24gPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdidXR0b24nKTsKICAgICAgICBjb21tYUJ1dHRvbi5kaXNhYmxlZCA9IHRydWU7IC8vIOemgeeUqOaMiemSrgogICAgICAgIGNvbW1hQnV0dG9uLnRleHRDb250ZW50ID0gJ++8jCc7IC8vIOmAl+WPt+ihqOaDheespuWPtwogICAgICAgIGNvbW1hQnV0dG9uLmNsYXNzTmFtZSA9ICdjb21tYS1idXR0b24nOwoKCiAgICAgICAgaWYgKGxhc3RJbnB1dEdyb3VwKSB7CiAgICAgICAgICAgIGxhc3RJbnB1dEdyb3VwLmFwcGVuZENoaWxkKGNvbW1hQnV0dG9uKTsKICAgICAgICB9CgoKICAgICAgICBuZXdJbnB1dEdyb3VwLmFwcGVuZENoaWxkKG5ld0lucHV0KTsKCgogICAgICAgIGlucHV0Q29udGFpbmVyLmFwcGVuZENoaWxkKG5ld0lucHV0R3JvdXApOwogICAgfQoKICAgIC8vIOWkjeWItumTvuaOpeWIsOWJqui0tOadvwogICAgZnVuY3Rpb24gY29weUxpbmsoKSB7CiAgICAgICAgY29uc3QgaW5wdXRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmlucHV0LWZpZWxkJyk7CiAgICAgICAgY29uc3QgbGlua3MgPSBBcnJheS5mcm9tKGlucHV0cykubWFwKGlucHV0ID0+IGlucHV0LnZhbHVlLnRyaW0oKSkuZmlsdGVyKHZhbHVlID0+IHZhbHVlICE9PSAnJyk7CiAgICAgICAgY29uc3QgY29tYmluZWRMaW5rcyA9IGxpbmtzLmpvaW4oJywnKTsKCiAgICAgICAgY29uc3QgbGluayA9IGAke3dpbmRvdy5sb2NhdGlvbi5vcmlnaW59Lz9saW5rcz0ke2VuY29kZVVSSUNvbXBvbmVudChjb21iaW5lZExpbmtzKX1gOwoKICAgICAgICAvLyDlpI3liLbpk77mjqXliLDliarotLTmnb8KICAgICAgICBuYXZpZ2F0b3IuY2xpcGJvYXJkLndyaXRlVGV4dChsaW5rKTsKICAgICAgICB3aW5kb3cubG9jYXRpb24uaHJlZiA9IGBjbGFzaDovL2luc3RhbGwtY29uZmlnP3VybD0ke2xpbmt9YAogICAgICAgIGNvbnNvbGUubG9nKGxpbmspOwoKCgogICAgICAgIGdlbmVyYXRlUVJDb2RlKGxpbmspOwogICAgfQo8L3NjcmlwdD4KPC9ib2R5Pgo8L2h0bWw+




`