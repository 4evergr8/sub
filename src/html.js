export let html = `

PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InpoIj4KPGhlYWQ+CiAgICA8bGluayByZWw9InN0eWxlc2hlZXQiIGhyZWY9Ii9yZXNvdXJjZXMvY3NzL3N0eWxlLmNzcyIvPgogICAgPG1ldGEgY2hhcnNldD0iVVRGLTgiPgogICAgPG1ldGEgbmFtZT0idmlld3BvcnQiIGNvbnRlbnQ9IndpZHRoPWRldmljZS13aWR0aCwgaW5pdGlhbC1zY2FsZT0xLjAiPgogICAgPHRpdGxlPkNsYXNo6YWN572u5paH5Lu26J6N5ZCIPC90aXRsZT4KICAgIDxzY3JpcHQgdHlwZT0idGV4dC9qYXZhc2NyaXB0IiBzcmM9Imh0dHBzOi8vY2RuanMuY2xvdWRmbGFyZS5jb20vYWpheC9saWJzL3FyY29kZS1nZW5lcmF0b3IvMS40LjQvcXJjb2RlLm1pbi5qcyI+PC9zY3JpcHQ+CiAgICA8c3R5bGU+CgoKICAgICAgICBAaW1wb3J0IHVybCgnaHR0cHM6Ly9mb250cy5nb29nbGVhcGlzLmNvbS9jc3MyP2ZhbWlseT1QbGF5d3JpdGUrQVUrU0E6d2dodEAxMDAuLjQwMCZmYW1pbHk9WkNPT0wrS3VhaUxlJmRpc3BsYXk9c3dhcCcpOwoKICAgICAgICAjcXJjb2RlIHsKICAgICAgICAgICAgbWFyZ2luOiAyMHB4IGF1dG87CiAgICAgICAgICAgIGRpc3BsYXk6IGJsb2NrOwogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjMDA3YmZmOyAvKiDovrnmoYbpopzoibIgKi8KICAgICAgICB9CiAgICAgICAgKiB7CiAgICAgICAgICAgIG1hcmdpbjogMDsKICAgICAgICAgICAgcGFkZGluZzogMDsKICAgICAgICAgICAgYm94LXNpemluZzogYm9yZGVyLWJveDsgLyog5L2/5a695bqm5ZKM6auY5bqm6K6h566X5YyF5ous5YaF6L656LedICovCiAgICAgICAgfQoKICAgICAgICBib2R5IHsKICAgICAgICAgICAgZm9udC1mYW1pbHk6ICJaQ09PTCBLdWFpTGUiLCBzZXJpZjsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogYmxhY2s7CiAgICAgICAgICAgIGRpc3BsYXk6IGZsZXg7CiAgICAgICAgICAgIGZsZXgtZGlyZWN0aW9uOiBjb2x1bW47CiAgICAgICAgICAgIGFsaWduLWl0ZW1zOiBjZW50ZXI7IC8qIOawtOW5s+WxheS4rSAqLwogICAgICAgICAgICBqdXN0aWZ5LWNvbnRlbnQ6IGNlbnRlcjsgLyog5Z6C55u05bGF5LitICovCiAgICAgICAgICAgIGhlaWdodDogMTAwdmg7IC8qIOinhuWPo+mrmOW6piAqLwogICAgICAgICAgICBtYXJnaW46IDA7IC8qIOWOu+aOiem7mOiupOeahOi+uei3nSAqLwoKICAgICAgICB9CgoKICAgICAgICBoMSB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMzBweDsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOyAvKiDmoIfpopjlsYXkuK0gKi8KICAgICAgICAgICAgY29sb3I6IGJsYWNrOyAvKiDlrZfkvZPpopzoibIgKi8KICAgICAgICAgICAgbWFyZ2luOiAxMHB4OyAvKiDovrnot50gKi8KICAgICAgICB9CiAgICAgICAgaDIgewogICAgICAgICAgICB0ZXh0LWFsaWduOiBjZW50ZXI7IC8qIOagh+mimOWxheS4rSAqLwogICAgICAgICAgICBjb2xvcjogYmxhY2s7IC8qIOWtl+S9k+minOiJsiAqLwogICAgICAgICAgICBtYXJnaW46IDEwcHg7IC8qIOi+uei3nSAqLwogICAgICAgIH0KICAgICAgICBoMyB7CiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgLyog5qCH6aKY5bGF5LitICovCiAgICAgICAgICAgIGNvbG9yOiBibGFjazsgLyog5a2X5L2T6aKc6ImyICovCiAgICAgICAgICAgIG1hcmdpbjogMTBweDsgLyog6L656LedICovCiAgICAgICAgfQoKCiAgICAgICAgLmlucHV0LWdyb3VwIHsKICAgICAgICAgICAgZGlzcGxheTogZmxleDsgLyog5L2/55So5by55oCn5biD5bGAICovCiAgICAgICAgICAgIGp1c3RpZnktY29udGVudDogY2VudGVyOyAvKiDlsYXkuK3lr7npvZAgKi8KICAgICAgICAgICAgbWFyZ2luLWJvdHRvbTogMjBweDsgLyog5LiL6L656LedICovCiAgICAgICAgfQoKICAgICAgICBsYWJlbCB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMThweDsgLyog5qCH562+5a2X5L2T5aSn5bCPICovCiAgICAgICAgICAgIG1hcmdpbjogMTBweDsgLyog6L656LedICovCiAgICAgICAgICAgIGFsaWduLXNlbGY6IGNlbnRlcjsgLyog5Z6C55u05bGF5LitICovCiAgICAgICAgfQoKCiAgICAgICAgaW5wdXRbdHlwZT0idGV4dCJdIHsKICAgICAgICAgICAgbWFyZ2luOiAxMHB4OyAvKiDmr4/kuKrmjInpkq7lkajlm7TmnIkxMHB455qE6Ze06LedICovCiAgICAgICAgICAgIHBhZGRpbmc6IDEwcHg7IC8qIOWGhei+uei3nSAqLwogICAgICAgICAgICBib3JkZXI6IDJweCBzb2xpZCAjMDA3YmZmOyAvKiDovrnmoYbpopzoibIgKi8KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsgLyog5ZyG6KeSICovCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsgLyog5a2X5L2T5aSn5bCPICovCiAgICAgICAgICAgIHdpZHRoOiAyMDBweDsgLyog6L6T5YWl5qGG5a695bqmICovCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJvcmRlci1jb2xvciAwLjNzLCBib3gtc2hhZG93IDAuM3MsIHRyYW5zZm9ybSAwLjNzOyAvKiDmt7vliqDov4fmuKHmlYjmnpwgKi8KICAgICAgICB9CgogICAgICAgIGlucHV0W3R5cGU9InRleHQiXTpmb2N1cyB7CiAgICAgICAgICAgIGJvcmRlci1jb2xvcjogIzAwNTZiMzsgLyog6IGa54Sm5pe26L655qGG6aKc6ImyICovCiAgICAgICAgICAgIG91dGxpbmU6IG5vbmU7IC8qIOWOu+aOiem7mOiupOeahOi9ruW7kyAqLwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDAgNXB4IHJnYmEoMCwgMTIzLCAyNTUsIDAuNSk7IC8qIOiBmueEpuaXtumYtOW9sSAqLwogICAgICAgIH0KCiAgICAgICAgaW5wdXRbdHlwZT0idGV4dCJdOmhvdmVyIHsKICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsIDEyMywgMjU1LCAwLjUpOyAvKiDmgqzlgZzml7bpmLTlvbEgKi8KICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOyAvKiDmgqzlgZzml7bkuIrnp7sgKi8KICAgICAgICB9CgogICAgICAgIGJ1dHRvbiB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiAiWkNPT0wgS3VhaUxlIiwgc2VyaWY7CiAgICAgICAgICAgIG1hcmdpbjogMTBweDsgLyog5q+P5Liq5oyJ6ZKu5ZGo5Zu05pyJMTBweOeahOmXtOi3nSAqLwogICAgICAgICAgICBwYWRkaW5nOiAxMHB4IDE1cHg7IC8qIOWGhei+uei3nSAqLwogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA3YmZmOyAvKiDmjInpkq7og4zmma/oibIgKi8KICAgICAgICAgICAgY29sb3I6IHdoaXRlOyAvKiDmjInpkq7lrZfkvZPpopzoibIgKi8KICAgICAgICAgICAgYm9yZGVyOiBub25lOyAvKiDljrvmjonovrnmoYYgKi8KICAgICAgICAgICAgYm9yZGVyLXJhZGl1czogMTBweDsgLyog5ZyG6KeSICovCiAgICAgICAgICAgIGZvbnQtc2l6ZTogMTZweDsgLyog5a2X5L2T5aSn5bCPICovCiAgICAgICAgICAgIGN1cnNvcjogcG9pbnRlcjsgLyog6byg5qCH5oyH6ZKI5qC35byPICovCiAgICAgICAgICAgIHRyYW5zaXRpb246IGJhY2tncm91bmQtY29sb3IgMC4zcywgYm94LXNoYWRvdyAwLjNzLCB0cmFuc2Zvcm0gMC4zczsgLyog5re75Yqg6L+H5rih5pWI5p6cICovCiAgICAgICAgfQoKICAgICAgICBidXR0b246aG92ZXIgewogICAgICAgICAgICBiYWNrZ3JvdW5kLWNvbG9yOiAjMDA1NmIzOyAvKiDmgqzlgZzml7bog4zmma/oibIgKi8KICAgICAgICAgICAgYm94LXNoYWRvdzogMCA0cHggMTVweCByZ2JhKDAsIDEyMywgMjU1LCAwLjUpOyAvKiDmgqzlgZzml7bpmLTlvbEgKi8KICAgICAgICAgICAgdHJhbnNmb3JtOiBzY2FsZSgxLjEpOyAvKiDmgqzlgZzml7bmlL7lpKcgKi8KICAgICAgICB9CgogICAgICAgIGNhbnZhcyB7CiAgICAgICAgICAgIGhlaWdodDogMTAwJTsKICAgICAgICAgICAgbGVmdDogMDsKICAgICAgICAgICAgcG9zaXRpb246IGZpeGVkOwogICAgICAgICAgICB0b3A6IDA7CiAgICAgICAgICAgIHRvdWNoLWFjdGlvbjogbm9uZTsKICAgICAgICAgICAgd2lkdGg6IDEwMCU7CiAgICAgICAgICAgIHotaW5kZXg6IC0xOyAvKiDnoa7kv51jYW52YXPlnKjmiYDmnInlhoXlrrnlkI7pnaIgKi8KICAgICAgICB9CgoKCgoKICAgICAgICAuY2FyZC1iYWNrIHsKCiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7IC8qIOWGhei+uei3nSAqLwogICAgICAgICAgICBkaXNwbGF5OiBmbGV4OwogICAgICAgICAgICBmbGV4LWRpcmVjdGlvbjogY29sdW1uOwogICAgICAgICAgICBib3gtc2hhZG93OiAwIDRweCAxNXB4IHJnYmEoMCwgMCwgMCwgMC4yKTsgLyog6Zi05b2x5pWI5p6cICovCiAgICAgICAgICAgIHRleHQtYWxpZ246IGNlbnRlcjsgLyog5paH5pys5bGF5LitICovCiAgICAgICAgICAgIGJhY2tncm91bmQ6IGxpbmVhci1ncmFkaWVudCh0byByaWdodCwgcmdiYSg1MCwgNTAsIDUwLCAxKSwgcmdiYSgyMTEsIDIxMSwgMjExLCAxKSk7IC8qIOabtOa3oeeahOm7keWIsOa1heeBsOeahOa4kOWPmCAqLwoKCiAgICAgICAgICAgIGJvcmRlci1yYWRpdXM6IDE1cHg7CiAgICAgICAgICAgIGJvcmRlcjogMnB4IHNvbGlkICMwMDdiZmY7IC8qIOi+ueahhuminOiJsiAqLwogICAgICAgIH0KCgoKICAgIDwvc3R5bGU+Cgo8L2hlYWQ+Cjxib2R5Pgo8Y2FudmFzPjwvY2FudmFzPgo8c2NyaXB0PgogICAgY29uc3QgY29udmVyc2lvbkZhY3RvciA9IDE4MCAvIE1hdGguUEk7CgogICAgdmFyIHJhZGlhblRvRGVncmVlcyA9IGZ1bmN0aW9uKHJhZGlhbikgewogICAgICAgIHJldHVybiByYWRpYW4gKiBjb252ZXJzaW9uRmFjdG9yOwogICAgfQoKICAgIHZhciBkZWdyZWVzVG9SYWRpYW4gPSBmdW5jdGlvbihkZWdyZWVzKSB7CiAgICAgICAgcmV0dXJuIGRlZ3JlZXMgLyBjb252ZXJzaW9uRmFjdG9yOwogICAgfQoKICAgIC8qKgogICAgICogQSBiYXNpYyAyRCBWZWN0b3IgY2xhc3MgdGhhdCBwcm92aWRlcyBzaW1wbGUgYWxnZWJyYWljIGZ1bmN0aW9uYWxpdHkgaW4gdGhlIGZvcm0KICAgICAqIG9mIDJEIFZlY3RvcnMuCiAgICAgKgogICAgICogV2UgdXNlIEdldHRlcnMvc2V0dGVycyBmb3IgYm90aCBwcmluY2lwbGUgcHJvcGVydGllcyAoeCAmIHkpIGFzIHdlbGwgYXMgdmlydHVhbAogICAgICogcHJvcGVydGllcyAocm90YXRpb24sIGxlbmd0aCBldGMuKS4KICAgICAqCiAgICAgKiBAY2xhc3MgVmVjdG9yCiAgICAgKiBAYXV0aG9yIExpYW0gRWdhbiA8bGlhbUB3ZXRoZWNvbGxlY3RpdmUuY29tPgogICAgICogQHZlcnNpb24gMC4xLjEKICAgICAqIEBjcmVhdGVkIERlYyAxOSwgMjAxNgogICAgICovCiAgICBjbGFzcyBWZWN0b3IgewoKICAgICAgICAvKioKICAgICAgICAgKiBUaGUgVmVjdG9yIENsYXNzIGNvbnN0cnVjdG9yCiAgICAgICAgICoKICAgICAgICAgKiBAY29uc3RydWN0b3IKICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geCAJCQkJVGhlIHggY29vcmQKICAgICAgICAgKiBAcGFyYW0ge251bWJlcn0geSAJCQkJVGhlIHkgY29vcmQKICAgICAgICAgKi8KICAgICAgICBjb25zdHJ1Y3Rvcih4LCB5KXsKICAgICAgICAgICAgdGhpcy54ID0geDsKICAgICAgICAgICAgdGhpcy55ID0geTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFJlc2V0cyB0aGUgdmVjdG9yIGNvb3JkaW5hdGVzCiAgICAgICAgICoKICAgICAgICAgKiBAcHVibGljCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHggCQkJCVRoZSB4IGNvb3JkCiAgICAgICAgICogQHBhcmFtIHtudW1iZXJ9IHkgCQkJCVRoZSB5IGNvb3JkCiAgICAgICAgICovCiAgICAgICAgcmVzZXQoeCwgeSkgewogICAgICAgICAgICB0aGlzLnggPSB4OwogICAgICAgICAgICB0aGlzLnkgPSB5OwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogUmVzZXRzIHRoZSB2ZWN0b3IgY29vcmRpbmF0ZXMgdG8gYW5vdGhlciB2ZWN0b3Igb2JqZWN0CiAgICAgICAgICoKICAgICAgICAgKiBAcHVibGljCiAgICAgICAgICogQHBhcmFtIHtWZWN0b3J9IHYgCQkJCVRoZSB2ZWN0b3Igb2JqZWN0IHRvIHVzZSB0byByZXNldCB0aGUgY29vcmRpbmF0ZXMKICAgICAgICAgKi8KICAgICAgICByZXNldFRvVmVjdG9yKHYpIHsKICAgICAgICAgICAgaWYodiBpbnN0YW5jZW9mIFZlY3RvcikgewogICAgICAgICAgICAgICAgdGhpcy54ID0gdi54OwogICAgICAgICAgICAgICAgdGhpcy55ID0gdi55OwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhlIHZlY3RvcgogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVRoZSBjbG9uZWQgdmVjdG9yCiAgICAgICAgICovCiAgICAgICAgY2xvbmUoKSB7CiAgICAgICAgICAgIHJldHVybiBuZXcgVmVjdG9yKHRoaXMueCwgdGhpcy55KTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEFkZHMgb25lIHZlY3RvciB0byBhbm90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtWZWN0b3J9ICB2ZWN0b3IgVGhlIHZlY3RvciB0byBhZGQgdG8gdGhpcyBvbmUKICAgICAgICAgKiBAcmV0dXJuIHtWZWN0b3J9CQkJCQlSZXR1cm5zIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICBhZGQodmVjdG9yKSB7CiAgICAgICAgICAgIHRoaXMueCArPSB2ZWN0b3IueDsKICAgICAgICAgICAgdGhpcy55ICs9IHZlY3Rvci55OwogICAgICAgICAgICByZXR1cm4gdGhpczsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2xvbmVzIHRoZSB2ZWN0b3IgYW5kIGFkZHMgdGhlIHZlY3RvciB0byBpdCBpbnN0ZWFkCiAgICAgICAgICoKICAgICAgICAgKiBAcHVibGljCiAgICAgICAgICogQGNoYWluYWJsZQogICAgICAgICAqIEBwYXJhbSAge1ZlY3Rvcn0gIHZlY3RvciBUaGUgdmVjdG9yIHRvIGFkZCB0byB0aGlzIG9uZQogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgdGhlIGNsb25lIG9mIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICBhZGROZXcodmVjdG9yKSB7CiAgICAgICAgICAgIGxldCB2ID0gdGhpcy5jbG9uZSgpOwogICAgICAgICAgICByZXR1cm4gdi5hZGQodmVjdG9yKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEFkZHMgYSBzY2FsYXIgdG8gdGhlIHZlY3RvciwgbW9kaWZ5aW5nIGJvdGggdGhlIHggYW5kIHkKICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGFyIFRoZSBzY2FsYXIgdG8gYWRkIHRvIHRoZSB2ZWN0b3IKICAgICAgICAgKiBAcmV0dXJuIHtWZWN0b3J9CQkJCQlSZXR1cm5zIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICBhZGRTY2FsYXIoc2NhbGFyKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmFkZChuZXcgVmVjdG9yKHNjYWxhciwgc2NhbGFyKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENsb25lcyB0aGUgdmVjdG9yIGFuZCBhZGRzIHRoZSBzY2FsYXIgdG8gaXQgaW5zdGVhZAogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsYXIgVGhlIHNjYWxhciB0byBhZGQgdG8gdGhlIHZlY3RvcgogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgdGhlIGNsb25lIG9mIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICBhZGRTY2FsYXJOZXcoc2NhbGFyKSB7CiAgICAgICAgICAgIGxldCB2ID0gdGhpcy5jbG9uZSgpOwogICAgICAgICAgICByZXR1cm4gdi5hZGRTY2FsYXIoc2NhbGFyKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFN1YnRyYWN0cyBvbmUgdmVjdG9yIGZyb20gYW5vdGhlci4KICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHBhcmFtICB7VmVjdG9yfSAgdmVjdG9yIFRoZSB2ZWN0b3IgdG8gc3VidHJhY3QgZnJvbSB0aGlzIG9uZQogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgaXRzZWxmLCBtb2RpZmllZAogICAgICAgICAqLwogICAgICAgIHN1YnRyYWN0KHZlY3RvcikgewogICAgICAgICAgICB0aGlzLnggLT0gdmVjdG9yLng7CiAgICAgICAgICAgIHRoaXMueSAtPSB2ZWN0b3IueTsKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENsb25lcyB0aGUgdmVjdG9yIGFuZCBzdWJ0cmFjdHMgdGhlIHZlY3RvciBmcm9tIGl0IGluc3RlYWQKICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHBhcmFtICB7VmVjdG9yfSAgdmVjdG9yIFRoZSB2ZWN0b3IgdG8gc3VidHJhY3QgZnJvbSB0aGlzIG9uZQogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgdGhlIGNsb25lIG9mIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICBzdWJ0cmFjdE5ldyh2ZWN0b3IpIHsKICAgICAgICAgICAgbGV0IHYgPSB0aGlzLmNsb25lKCk7CiAgICAgICAgICAgIHJldHVybiB2LnN1YnRyYWN0KHZlY3Rvcik7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBTdWJ0cmFjdHMgYSBzY2FsYXIgZnJvbSB0aGUgdmVjdG9yLCBtb2RpZnlpbmcgYm90aCB0aGUgeCBhbmQgeQogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsYXIgVGhlIHNjYWxhciB0byBzdWJ0cmFjdCBmcm9tIHRoZSB2ZWN0b3IKICAgICAgICAgKiBAcmV0dXJuIHtWZWN0b3J9CQkJCQlSZXR1cm5zIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICBzdWJ0cmFjdFNjYWxhcihzY2FsYXIpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3VidHJhY3QobmV3IFZlY3RvcihzY2FsYXIsIHNjYWxhcikpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhlIHZlY3RvciBhbmQgc3VidHJhY3RzIHRoZSBzY2FsYXIgZnJvbSBpdCBpbnN0ZWFkCiAgICAgICAgICoKICAgICAgICAgKiBAcHVibGljCiAgICAgICAgICogQGNoYWluYWJsZQogICAgICAgICAqIEBwYXJhbSAge251bWJlcn0gIHNjYWxhciBUaGUgc2NhbGFyIHRvIGFkZCB0byB0aGUgdmVjdG9yCiAgICAgICAgICogQHJldHVybiB7VmVjdG9yfQkJCQkJUmV0dXJucyB0aGUgY2xvbmUgb2YgaXRzZWxmLCBtb2RpZmllZAogICAgICAgICAqLwogICAgICAgIHN1YnRyYWN0U2NhbGFyTmV3KHNjYWxhcikgewogICAgICAgICAgICBsZXQgdiA9IHRoaXMuY2xvbmUoKTsKICAgICAgICAgICAgcmV0dXJuIHYuc3VidHJhY3RTY2FsYXIoc2NhbGFyKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIERpdmlkZXMgb25lIHZlY3RvciBieSBhbm90aGVyLgogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtWZWN0b3J9ICB2ZWN0b3IgVGhlIHZlY3RvciB0byBkaXZpZGUgdGhpcyBieQogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgaXRzZWxmLCBtb2RpZmllZAogICAgICAgICAqLwogICAgICAgIGRpdmlkZSh2ZWN0b3IpIHsKICAgICAgICAgICAgaWYodmVjdG9yLnggIT09IDApIHsKICAgICAgICAgICAgICAgIHRoaXMueCAvPSB2ZWN0b3IueAogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhpcy54ID0gMDsKICAgICAgICAgICAgfQogICAgICAgICAgICBpZih2ZWN0b3IueSAhPT0gMCkgewogICAgICAgICAgICAgICAgdGhpcy55IC89IHZlY3Rvci55CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aGlzLnkgPSAwOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhlIHZlY3RvciBhbmQgZGl2aWRlcyBpdCBieSB0aGUgdmVjdG9yIGluc3RlYWQKICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHBhcmFtICB7VmVjdG9yfSAgdmVjdG9yIFRoZSB2ZWN0b3IgdG8gZGl2aWRlIHRoZSBjbG9uZSBieQogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgdGhlIGNsb25lIG9mIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICBkaXZpZGVOZXcodmVjdG9yKSB7CiAgICAgICAgICAgIGxldCB2ID0gdGhpcy5jbG9uZSgpOwogICAgICAgICAgICByZXR1cm4gdi5kaXZpZGUodmVjdG9yKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIERpdmlkZXMgdGhlIHZlY3RvciBieSBhIHNjYWxhci4KICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGFyIFRoZSBzY2FsYXIgdG8gZGl2aWRlIGJvdGggeCBhbmQgeSBieQogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgaXRzZWxmLCBtb2RpZmllZAogICAgICAgICAqLwogICAgICAgIGRpdmlkZVNjYWxhcihzY2FsYXIpIHsKICAgICAgICAgICAgdmFyIHYgPSBuZXcgVmVjdG9yKHNjYWxhciwgc2NhbGFyKTsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGl2aWRlKHYpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhlIHZlY3RvciBhbmQgZGl2aWRlcyBpdCBieSB0aGUgcHJvdmlkZWQgc2NhbGFyLgogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsYXIgVGhlIHNjYWxhciB0byBkaXZpZGUgYm90aCB4IGFuZCB5IGJ5CiAgICAgICAgICogQHJldHVybiB7VmVjdG9yfQkJCQkJUmV0dXJucyB0aGUgY2xvbmUgb2YgaXRzZWxmLCBtb2RpZmllZAogICAgICAgICAqLwogICAgICAgIGRpdmlkZVNjYWxhck5ldyhzY2FsYXIpIHsKICAgICAgICAgICAgbGV0IHYgPSB0aGlzLmNsb25lKCk7CiAgICAgICAgICAgIHJldHVybiB2LmRpdmlkZVNjYWxhcihzY2FsYXIpOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogTXVsdGlwbGllcyBvbmUgdmVjdG9yIGJ5IGFub3RoZXIuCiAgICAgICAgICoKICAgICAgICAgKiBAcHVibGljCiAgICAgICAgICogQGNoYWluYWJsZQogICAgICAgICAqIEBwYXJhbSAge1ZlY3Rvcn0gIHZlY3RvciBUaGUgdmVjdG9yIHRvIG11bHRpcGx5IHRoaXMgYnkKICAgICAgICAgKiBAcmV0dXJuIHtWZWN0b3J9CQkJCQlSZXR1cm5zIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICBtdWx0aXBseSh2ZWN0b3IpIHsKICAgICAgICAgICAgdGhpcy54ICo9IHZlY3Rvci54OwogICAgICAgICAgICB0aGlzLnkgKj0gdmVjdG9yLnk7CiAgICAgICAgICAgIHJldHVybiB0aGlzOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhlIHZlY3RvciBhbmQgbXVsdGlwbGllcyBpdCBieSB0aGUgdmVjdG9yIGluc3RlYWQKICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHBhcmFtICB7VmVjdG9yfSAgdmVjdG9yIFRoZSB2ZWN0b3IgdG8gbXVsdGlwbHkgdGhlIGNsb25lIGJ5CiAgICAgICAgICogQHJldHVybiB7VmVjdG9yfQkJCQkJUmV0dXJucyB0aGUgY2xvbmUgb2YgaXRzZWxmLCBtb2RpZmllZAogICAgICAgICAqLwogICAgICAgIG11bHRpcGx5TmV3KHZlY3RvcikgewogICAgICAgICAgICBsZXQgdiA9IHRoaXMuY2xvbmUoKTsKICAgICAgICAgICAgcmV0dXJuIHYubXVsdGlwbHkodmVjdG9yKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIE11bHRpcGxpZXMgdGhlIHZlY3RvciBieSBhIHNjYWxhci4KICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHBhcmFtICB7bnVtYmVyfSAgc2NhbGFyIFRoZSBzY2FsYXIgdG8gbXVsdGlwbHkgYm90aCB4IGFuZCB5IGJ5CiAgICAgICAgICogQHJldHVybiB7VmVjdG9yfQkJCQkJUmV0dXJucyBpdHNlbGYsIG1vZGlmaWVkCiAgICAgICAgICovCiAgICAgICAgbXVsdGlwbHlTY2FsYXIoc2NhbGFyKSB7CiAgICAgICAgICAgIHZhciB2ID0gbmV3IFZlY3RvcihzY2FsYXIsIHNjYWxhcik7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5KHYpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhlIHZlY3RvciBhbmQgbXVsdGlwbGllcyBpdCBieSB0aGUgcHJvdmlkZWQgc2NhbGFyLgogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBzY2FsYXIgVGhlIHNjYWxhciB0byBtdWx0aXBseSBib3RoIHggYW5kIHkgYnkKICAgICAgICAgKiBAcmV0dXJuIHtWZWN0b3J9CQkJCQlSZXR1cm5zIHRoZSBjbG9uZSBvZiBpdHNlbGYsIG1vZGlmaWVkCiAgICAgICAgICovCiAgICAgICAgbXVsdGlwbHlTY2FsYXJOZXcoc2NhbGFyKSB7CiAgICAgICAgICAgIGxldCB2ID0gdGhpcy5jbG9uZSgpOwogICAgICAgICAgICByZXR1cm4gdi5tdWx0aXBseVNjYWxhcihzY2FsYXIpOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogQWxpYXMgb2Yge0BsaW5rIFZlY3RvciNtdWx0aXBseVNjYWxhcl9fYW5jaG9yIG11bHRpcGx5U2NhbGFyfQogICAgICAgICAqLwogICAgICAgIHNjYWxlKHNjYWxhcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5tdWx0aXBseVNjYWxhcihzY2FsYXIpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBBbGlhcyBvZiB7QGxpbmsgVmVjdG9yI211bHRpcGx5U2NhbGFyTmV3X19hbmNob3IgbXVsdGlwbHlTY2FsYXJOZXd9CiAgICAgICAgICovCiAgICAgICAgc2NhbGVOZXcoc2NhbGFyKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLm11bHRpcGx5U2NhbGFyTmV3KHNjYWxhcik7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBSb3RhdGVzIGEgdmVjb3IgYnkgYSBnaXZlbiBhbW91bnQsIHByb3ZpZGVkIGluIHJhZGlhbnMuCiAgICAgICAgICoKICAgICAgICAgKiBAcHVibGljCiAgICAgICAgICogQGNoYWluYWJsZQogICAgICAgICAqIEBwYXJhbSAge251bWJlcn0gIHJhZGlhbiBUaGUgYW5nbGUsIGluIHJhZGlhbnMsIHRvIHJvdGF0ZSB0aGUgdmVjdG9yIGJ5CiAgICAgICAgICogQHJldHVybiB7VmVjdG9yfQkJCQkJUmV0dXJucyBpdHNlbGYsIG1vZGlmaWVkCiAgICAgICAgICovCiAgICAgICAgcm90YXRlKHJhZGlhbikgewogICAgICAgICAgICB2YXIgeCA9ICh0aGlzLnggKiBNYXRoLmNvcyhyYWRpYW4pKSAtICh0aGlzLnkgKiBNYXRoLnNpbihyYWRpYW4pKTsKICAgICAgICAgICAgdmFyIHkgPSAodGhpcy54ICogTWF0aC5zaW4ocmFkaWFuKSkgKyAodGhpcy55ICogTWF0aC5jb3MocmFkaWFuKSk7CgogICAgICAgICAgICB0aGlzLnggPSB4OwogICAgICAgICAgICB0aGlzLnkgPSB5OwoKICAgICAgICAgICAgcmV0dXJuIHRoaXM7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENsb25lcyB0aGUgdmVjdG9yIGFuZCByb3RhdGVzIGl0IGJ5IHRoZSBzdXBwbGllZCByYWRpYW4gdmFsdWUKICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHBhcmFtICB7bnVtYmVyfSAgcmFkaWFuIFRoZSBhbmdsZSwgaW4gcmFkaWFucywgdG8gcm90YXRlIHRoZSB2ZWN0b3IgYnkKICAgICAgICAgKiBAcmV0dXJuIHtWZWN0b3J9CQkJCQlSZXR1cm5zIHRoZSBjbG9uZSBvZiBpdHNlbGYsIG1vZGlmaWVkCiAgICAgICAgICovCiAgICAgICAgcm90YXRlTmV3KHJhZGlhbikgewogICAgICAgICAgICBsZXQgdiA9IHRoaXMuY2xvbmUoKTsKICAgICAgICAgICAgcmV0dXJuIHYucm90YXRlKHJhZGlhbik7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBSb3RhdGVzIGEgdmVjb3IgYnkgYSBnaXZlbiBhbW91bnQsIHByb3ZpZGVkIGluIGRlZ3JlZXMuIENvbnZlcnRzIHRoZSBkZWdyZWUKICAgICAgICAgKiB2YWx1ZSB0byByYWRpYW5zIGFuZCBydW5zIHRoZSByb3RhZXQgbWV0aG9kLgogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBkZWdyZWVzIFRoZSBhbmdsZSwgaW4gZGVncmVlcywgdG8gcm90YXRlIHRoZSB2ZWN0b3IgYnkKICAgICAgICAgKiBAcmV0dXJuIHtWZWN0b3J9CQkJCQkJUmV0dXJucyBpdHNlbGYsIG1vZGlmaWVkCiAgICAgICAgICovCiAgICAgICAgcm90YXRlRGVnKGRlZ3JlZXMpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMucm90YXRlKGRlZ3JlZXNUb1JhZGlhbihkZWdyZWVzKSk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIENsb25lcyB0aGUgdmVjdG9yIGFuZCByb3RhdGVzIGl0IGJ5IHRoZSBzdXBwbGllZCBkZWdyZWUgdmFsdWUKICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHBhcmFtICB7bnVtYmVyfSAgZGVncmVlcyBUaGUgYW5nbGUsIGluIGRlZ3JlZXMsIHRvIHJvdGF0ZSB0aGUgdmVjdG9yIGJ5CiAgICAgICAgICogQHJldHVybiB7VmVjdG9yfQkJCQkJIFJldHVybnMgdGhlIGNsb25lIG9mIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICByb3RhdGVEZWdOZXcoZGVncmVlcykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGVOZXcoZGVncmVlc1RvUmFkaWFuKGRlZ3JlZXMpKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIEFsaWFzIG9mIHtAbGluayBWZWN0b3Ijcm90YXRlX19hbmNob3Igcm90YXRlfQogICAgICAgICAqLwogICAgICAgIHJvdGF0ZUJ5KHJhZGlhbikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGUocmFkaWFuKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQWxpYXMgb2Yge0BsaW5rIFZlY3RvciNyb3RhdGVOZXdfX2FuY2hvciByb3RhdGVOZXd9CiAgICAgICAgICovCiAgICAgICAgcm90YXRlQnlOZXcocmFkaWFuKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnJvdGF0ZU5ldyhyYWRpYW4pOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogQWxpYXMgb2Yge0BsaW5rIFZlY3RvciNyb3RhdGVEZWdfX2FuY2hvciByb3RhdGVEZWd9CiAgICAgICAgICovCiAgICAgICAgcm90YXRlRGVnQnkoZGVncmVlcykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGVEZWcoZGVncmVlcyk7CiAgICAgICAgfQogICAgICAgIC8qKgogICAgICAgICAqIEFsaWFzIG9mIHtAbGluayBWZWN0b3Ijcm90YXRlRGVnTmV3X19hbmNob3Igcm90YXRlRGVnTmV3fQogICAgICAgICAqLwogICAgICAgIHJvdGF0ZURlZ0J5TmV3KHJhZGlhbikgewogICAgICAgICAgICByZXR1cm4gdGpvcy5yb3RhdGVEZWdOZXcocmFkaWFuKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIFJvdGF0ZXMgYSB2ZWN0b3IgdG8gYSBzcGVjaWZpYyBhbmdsZQogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICByYWRpYW4gVGhlIGFuZ2xlLCBpbiByYWRpYW5zLCB0byByb3RhdGUgdGhlIHZlY3RvciB0bwogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgaXRzZWxmLCBtb2RpZmllZAogICAgICAgICAqLwogICAgICAgIHJvdGF0ZVRvKHJhZGlhbikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGUocmFkaWFuLXRoaXMuYW5nbGUpOwogICAgICAgIH07CiAgICAgICAgLyoqCiAgICAgICAgICogQ2xvbmVzIHRoZSB2ZWN0b3IgYW5kIHJvdGF0ZXMgaXQgdG8gdGhlIHN1cHBsaWVkIHJhZGlhbiB2YWx1ZQogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICByYWRpYW4gVGhlIGFuZ2xlLCBpbiByYWRpYW5zLCB0byByb3RhdGUgdGhlIHZlY3RvciB0bwogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgdGhlIGNsb25lIG9mIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICByb3RhdGVUb05ldyhyYWRpYW4pIHsKICAgICAgICAgICAgbGV0IHYgPSB0aGlzLmNsb25lKCk7CiAgICAgICAgICAgIHJldHVybiB2LnJvdGF0ZVRvKHJhZGlhbik7CiAgICAgICAgfTsKCiAgICAgICAgLyoqCiAgICAgICAgICogUm90YXRlcyBhIHZlY29yIHRvIGEgZ2l2ZW4gYW1vdW50LCBwcm92aWRlZCBpbiBkZWdyZWVzLiBDb252ZXJ0cyB0aGUgZGVncmVlCiAgICAgICAgICogdmFsdWUgdG8gcmFkaWFucyBhbmQgcnVucyB0aGUgcm90YXRlVG8gbWV0aG9kLgogICAgICAgICAqCiAgICAgICAgICogQHB1YmxpYwogICAgICAgICAqIEBjaGFpbmFibGUKICAgICAgICAgKiBAcGFyYW0gIHtudW1iZXJ9ICBkZWdyZWVzIFRoZSBhbmdsZSwgaW4gZGVncmVlcywgdG8gcm90YXRlIHRoZSB2ZWN0b3IgdG8KICAgICAgICAgKiBAcmV0dXJuIHtWZWN0b3J9CQkJCQkJUmV0dXJucyBpdHNlbGYsIG1vZGlmaWVkCiAgICAgICAgICovCiAgICAgICAgcm90YXRlVG9EZWcoZGVncmVlcykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGVUbyhkZWdyZWVzVG9SYWRpYW4oZGVncmVlcykpOwogICAgICAgIH0KICAgICAgICAvKioKICAgICAgICAgKiBDbG9uZXMgdGhlIHZlY3RvciBhbmQgcm90YXRlcyBpdCB0byB0aGUgc3VwcGxpZWQgZGVncmVlIHZhbHVlCiAgICAgICAgICoKICAgICAgICAgKiBAcHVibGljCiAgICAgICAgICogQGNoYWluYWJsZQogICAgICAgICAqIEBwYXJhbSAge251bWJlcn0gIGRlZ3JlZXMgVGhlIGFuZ2xlLCBpbiBkZWdyZWVzLCB0byByb3RhdGUgdGhlIHZlY3RvciB0bwogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCSBSZXR1cm5zIHRoZSBjbG9uZSBvZiBpdHNlbGYsIG1vZGlmaWVkCiAgICAgICAgICovCiAgICAgICAgcm90YXRlVG9EZWdOZXcoZGVncmVlcykgewogICAgICAgICAgICByZXR1cm4gdGhpcy5yb3RhdGVUb05ldyhkZWdyZWVzVG9SYWRpYW4oZGVncmVlcykpOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogTm9ybWFsaXNlcyB0aGUgdmVjdG9yIGRvd24gdG8gYSBsZW5ndGggb2YgMSB1bml0CiAgICAgICAgICoKICAgICAgICAgKiBAcHVibGljCiAgICAgICAgICogQGNoYWluYWJsZQogICAgICAgICAqIEByZXR1cm4ge1ZlY3Rvcn0JCQkJCVJldHVybnMgaXRzZWxmLCBtb2RpZmllZAogICAgICAgICAqLwogICAgICAgIG5vcm1hbGlzZSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuZGl2aWRlU2NhbGFyKHRoaXMubGVuZ3RoKTsKICAgICAgICB9CiAgICAgICAgLyoqCiAgICAgICAgICogQ2xvbmVzIHRoZSB2ZWN0b3IgYW5kIG5vcm1hbGlzZXMgaXQKICAgICAgICAgKgogICAgICAgICAqIEBwdWJsaWMKICAgICAgICAgKiBAY2hhaW5hYmxlCiAgICAgICAgICogQHJldHVybiB7VmVjdG9yfQkJCQkJUmV0dXJucyBhIGNsb25lIG9mIGl0c2VsZiwgbW9kaWZpZWQKICAgICAgICAgKi8KICAgICAgICBub3JtYWxpc2VOZXcoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLmRpdmlkZVNjYWxhck5ldyh0aGlzLmxlbmd0aCk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVzIHRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoaXMgYW5kIHRoZSBzdXBwbGllZCB2ZWN0b3IKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSAge1ZlY3Rvcn0gdmVjdG9yIFRoZSB2ZWN0b3IgdG8gY2FsY3VsYXRlIHRoZSBkaXN0YW5jZSBmcm9tCiAgICAgICAgICogQHJldHVybiB7bnVtYmVyfSAgICAgICAgVGhlIGRpc3RhbmNlIGJldHdlZW4gdGhpcyBhbmQgdGhlIHN1cHBsaWVkIHZlY3RvcgogICAgICAgICAqLwogICAgICAgIGRpc3RhbmNlKHZlY3RvcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy5zdWJ0cmFjdE5ldyh2ZWN0b3IpLmxlbmd0aDsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIENhbGN1bGF0ZXMgdGhlIGRpc3RhbmNlIG9uIHRoZSBYIGF4aXMgYmV0d2VlbiB0aGlzIGFuZCB0aGUgc3VwcGxpZWQgdmVjdG9yCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gIHtWZWN0b3J9IHZlY3RvciBUaGUgdmVjdG9yIHRvIGNhbGN1bGF0ZSB0aGUgZGlzdGFuY2UgZnJvbQogICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gICAgICAgIFRoZSBkaXN0YW5jZSwgYWxvbmcgdGhlIHggYXhpcywgYmV0d2VlbiB0aGlzIGFuZCB0aGUgc3VwcGxpZWQgdmVjdG9yCiAgICAgICAgICovCiAgICAgICAgZGlzdGFuY2VYKHZlY3RvcikgewogICAgICAgICAgICByZXR1cm4gdGhpcy54IC0gdmVjdG9yLng7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiBDYWxjdWxhdGVkIHRoZSBkaXN0YW5jZSBvbiB0aGUgWSBheGlzIGJldHdlZW4gdGhpcyBhbmQgdGhlIHN1cHBsaWVkIHZlY3RvcgogICAgICAgICAqCiAgICAgICAgICogQHBhcmFtICB7VmVjdG9yfSB2ZWN0b3IgVGhlIHZlY3RvciB0byBjYWxjdWxhdGUgdGhlIGRpc3RhbmNlIGZyb20KICAgICAgICAgKiBAcmV0dXJuIHtudW1iZXJ9ICAgICAgICBUaGUgZGlzdGFuY2UsIGFsb25nIHRoZSB5IGF4aXMsIGJldHdlZW4gdGhpcyBhbmQgdGhlIHN1cHBsaWVkIHZlY3RvcgogICAgICAgICAqLwogICAgICAgIGRpc3RhbmNlWSh2ZWN0b3IpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMueSAtIHZlY3Rvci55OwogICAgICAgIH0KCgogICAgICAgIC8qKgogICAgICAgICAqIENhbGN1bGF0ZXMgdGhlIGRvdCBwcm9kdWN0IGJldHdlZW4gdGhpcyBhbmQgYSBzdXBwbGllZCB2ZWN0b3IKICAgICAgICAgKgogICAgICAgICAqIEBleGFtcGxlCiAgICAgICAgICogLy8gcmV0dXJucyAtMTQKICAgICAgICAgKiBuZXcgVmVjdG9yKDIsIC0zKS5kb3QobmV3IFZlY3RvcigtNCwgMikpCiAgICAgICAgICogbmV3IFZlY3RvcigtNCwgMikuZG90KG5ldyBWZWN0b3IoMiwgLTMpKQogICAgICAgICAqIG5ldyBWZWN0b3IoMiwgLTQpLmRvdChuZXcgVmVjdG9yKC0zLCAyKSkKICAgICAgICAgKgogICAgICAgICAqIEBwYXJhbSAge1ZlY3Rvcn0gdmVjdG9yIFRoZSB2ZWN0b3Igb2JqZWN0IGFnYWluc3Qgd2hpY2ggdG8gY2FsY3VsYXRlIHRoZSBkb3QgcHJvZHVjdAogICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gICAgICAgIFRoZSBkb3QgcHJvZHVjdCBvZiB0aGUgdHdvIHZlY3RvcnMKICAgICAgICAgKi8KICAgICAgICBkb3QodmVjdG9yKSB7CiAgICAgICAgICAgIHJldHVybiAodGhpcy54ICogdmVjdG9yLngpICsgKHRoaXMueSAqIHZlY3Rvci55KTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIENhbGN1bGF0ZXMgdGhlIGNyb3NzIHByb2R1Y3QgYmV0d2VlbiB0aGlzIGFuZCB0aGUgc3VwcGxpZWQgdmVjdG9yLgogICAgICAgICAqCiAgICAgICAgICogQGV4YW1wbGUKICAgICAgICAgKiAvLyByZXR1cm5zIC0yCiAgICAgICAgICogbmV3IFZlY3RvcigyLCAtMykuY3Jvc3MobmV3IFZlY3RvcigtNCwgMikpCiAgICAgICAgICogbmV3IFZlY3RvcigtNCwgMikuY3Jvc3MobmV3IFZlY3RvcigyLCAtMykpCiAgICAgICAgICogLy8gcmV0dXJucyAyCiAgICAgICAgICogbmV3IFZlY3RvcigyLCAtNCkuY3Jvc3MobmV3IFZlY3RvcigtMywgMikpCiAgICAgICAgICoKICAgICAgICAgKiBAcGFyYW0gIHtWZWN0b3J9IHZlY3RvciBUaGUgdmVjdG9yIG9iamVjdCBhZ2FpbnN0IHdoaWNoIHRvIGNhbGN1bGF0ZSB0aGUgY3Jvc3MgcHJvZHVjdAogICAgICAgICAqIEByZXR1cm4ge251bWJlcn0gICAgICAgIFRoZSBjcm9zcyBwcm9kdWN0IG9mIHRoZSB0d28gdmVjdG9ycwogICAgICAgICAqLwogICAgICAgIGNyb3NzKHZlY3RvcikgewogICAgICAgICAgICByZXR1cm4gKHRoaXMueCAqIHZlY3Rvci54KSAtICh0aGlzLnkgKiB2ZWN0b3IueSk7CiAgICAgICAgfQoKCiAgICAgICAgLyoqCiAgICAgICAgICogR2V0dGVycyBhbmQgc2V0dGVycwogICAgICAgICAqLwoKICAgICAgICAvKioKICAgICAgICAgKiAoZ2V0dGVyL3NldHRlcikgVGhlIHggdmFsdWUgb2YgdGhlIHZlY3Rvci4KICAgICAgICAgKgogICAgICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgICAgICogQGRlZmF1bHQgMAogICAgICAgICAqLwogICAgICAgIHNldCB4KHgpIHsKICAgICAgICAgICAgaWYodHlwZW9mIHggPT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3ggPSB4OwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignWCBzaG91bGQgYmUgYSBudW1iZXInKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXQgeCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ggfHwgMDsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIChnZXR0ZXIvc2V0dGVyKSBUaGUgeSB2YWx1ZSBvZiB0aGUgdmVjdG9yLgogICAgICAgICAqCiAgICAgICAgICogQHR5cGUge251bWJlcn0KICAgICAgICAgKiBAZGVmYXVsdCAwCiAgICAgICAgICovCiAgICAgICAgc2V0IHkoeSkgewogICAgICAgICAgICBpZih0eXBlb2YgeSA9PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgdGhpcy5feSA9IHk7CiAgICAgICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdZIHNob3VsZCBiZSBhIG51bWJlcicpOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGdldCB5KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5feSB8fCAwOwogICAgICAgIH0KCiAgICAgICAgLyoqCiAgICAgICAgICogKGdldHRlci9zZXR0ZXIpIFRoZSBsZW5ndGggb2YgdGhlIHZlY3RvciBwcmVzZW50ZWQgYXMgYSBzcXVhcmUuIElmIHlvdSdyZSB1c2luZwogICAgICAgICAqIGxlbmd0aCBmb3IgY29tcGFyaXNvbiwgdGhpcyBpcyBxdWlja2VyLgogICAgICAgICAqCiAgICAgICAgICogQHR5cGUge251bWJlcn0KICAgICAgICAgKiBAZGVmYXVsdCAwCiAgICAgICAgICovCiAgICAgICAgc2V0IGxlbmd0aFNxdWFyZWQobGVuZ3RoKSB7CiAgICAgICAgICAgIHZhciBmYWN0b3I7CiAgICAgICAgICAgIGlmKHR5cGVvZiBsZW5ndGggPT0gJ251bWJlcicpIHsKICAgICAgICAgICAgICAgIGZhY3RvciA9IGxlbmd0aCAvIHRoaXMubGVuZ3RoU3F1YXJlZDsKICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbHlTY2FsYXIoZmFjdG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2xlbmd0aCBzaG91bGQgYmUgYSBudW1iZXInKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXQgbGVuZ3RoU3F1YXJlZCgpIHsKICAgICAgICAgICAgcmV0dXJuICh0aGlzLnggKiB0aGlzLngpICsgKHRoaXMueSAqIHRoaXMueSk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiAoZ2V0dGVyL3NldHRlcikgVGhlIGxlbmd0aCBvZiB0aGUgdmVjdG9yCiAgICAgICAgICoKICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICAgICAqIEBkZWZhdWx0IDAKICAgICAgICAgKi8KICAgICAgICBzZXQgbGVuZ3RoKGxlbmd0aCkgewogICAgICAgICAgICB2YXIgZmFjdG9yOwogICAgICAgICAgICBpZih0eXBlb2YgbGVuZ3RoID09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgICBmYWN0b3IgPSBsZW5ndGggLyB0aGlzLmxlbmd0aDsKICAgICAgICAgICAgICAgIHRoaXMubXVsdGlwbHlTY2FsYXIoZmFjdG9yKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ2xlbmd0aCBzaG91bGQgYmUgYSBudW1iZXInKTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXQgbGVuZ3RoKCkgewogICAgICAgICAgICByZXR1cm4gTWF0aC5zcXJ0KHRoaXMubGVuZ3RoU3F1YXJlZCk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiAoZ2V0dGVyL3NldHRlcikgVGhlIGFuZ2xlIG9mIHRoZSB2ZWN0b3IsIGluIHJhZGlhbnMKICAgICAgICAgKgogICAgICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgICAgICogQGRlZmF1bHQgMAogICAgICAgICAqLwogICAgICAgIHNldCBhbmdsZShyYWRpYW4pIHsKICAgICAgICAgICAgaWYodHlwZW9mIHJhZGlhbiA9PSAnbnVtYmVyJykgewogICAgICAgICAgICAgICAgdGhpcy5yb3RhdGVUbyhyYWRpYW4pOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYW5nbGUgc2hvdWxkIGJlIGEgbnVtYmVyJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZ2V0IGFuZ2xlKCkgewogICAgICAgICAgICByZXR1cm4gTWF0aC5hdGFuMih0aGlzLnksIHRoaXMueCk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiAoZ2V0dGVyL3NldHRlcikgVGhlIGFuZ2xlIG9mIHRoZSB2ZWN0b3IsIGluIHJhZGlhbnMKICAgICAgICAgKgogICAgICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgICAgICogQGRlZmF1bHQgMAogICAgICAgICAqLwogICAgICAgIHNldCBhbmdsZUluRGVncmVlcyhkZWdyZWVzKSB7CiAgICAgICAgICAgIGlmKHR5cGVvZiBkZWdyZWVzID09ICdudW1iZXInKSB7CiAgICAgICAgICAgICAgICB0aGlzLnJvdGF0ZVRvRGVnKGRlZ3JlZXMpOwogICAgICAgICAgICB9IGVsc2UgewogICAgICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignYW5nbGUgc2hvdWxkIGJlIGEgbnVtYmVyJyk7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZ2V0IGFuZ2xlSW5EZWdyZWVzKCkgewogICAgICAgICAgICByZXR1cm4gcmFkaWFuVG9EZWdyZWVzKE1hdGguYXRhbjIodGhpcy55LCB0aGlzLngpKTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIChnZXR0ZXIvc2V0dGVyKSBWZWN0b3Igd2lkdGguCiAgICAgICAgICogQWxpYXMgb2Yge0BsaW5rIFZlY3RvciN4IHh9CiAgICAgICAgICoKICAgICAgICAgKiBAdHlwZSB7bnVtYmVyfQogICAgICAgICAqLwogICAgICAgIHNldCB3aWR0aCh3KSB7CiAgICAgICAgICAgIHRoaXMueCA9IHc7CiAgICAgICAgfQogICAgICAgIGdldCB3aWR0aCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMueDsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIChnZXR0ZXIvc2V0dGVyKSBWZWN0b3IgaGVpZ2h0LgogICAgICAgICAqIEFsaWFzIG9mIHtAbGluayBWZWN0b3IjeCB4fQogICAgICAgICAqCiAgICAgICAgICogQHR5cGUge251bWJlcn0KICAgICAgICAgKi8KICAgICAgICBzZXQgaGVpZ2h0KGgpIHsKICAgICAgICAgICAgdGhpcy55ID0gaDsKICAgICAgICB9CiAgICAgICAgZ2V0IGhlaWdodCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMueTsKICAgICAgICB9CgogICAgICAgIC8qKgogICAgICAgICAqIChnZXR0ZXIvc2V0dGVyKSBWZWN0b3IgYXJlYS4KICAgICAgICAgKiBAcmVhZG9ubHkKICAgICAgICAgKgogICAgICAgICAqIEB0eXBlIHtudW1iZXJ9CiAgICAgICAgICovCiAgICAgICAgZ2V0IGFyZWEoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnggKiB0aGlzLnk7CiAgICAgICAgfQoKICAgICAgICAvKioKICAgICAgICAgKiAoZ2V0dGVyL3NldHRlcikgVmVjdG9yIHNsb3BlLgogICAgICAgICAqCiAgICAgICAgICogQHR5cGUge251bWJlcn0KICAgICAgICAgKi8KICAgICAgICBzZXQgc2xvcGUodmFsdWUpIHsKICAgICAgICAgICAgaWYoIWlzTmFOKHZhbHVlKSkgewogICAgICAgICAgICAgICAgbGV0IGFuZ2xlID0gTWF0aC5hdGFuKHZhbHVlKTsKICAgICAgICAgICAgICAgIHRoaXMuYW5nbGUgPSBhbmdsZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXQgc2xvcGUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLnkgLyB0aGlzLng7CiAgICAgICAgfQoKICAgIH0KCgo8L3NjcmlwdD4KPHNjcmlwdD4KICAgIGNsYXNzIFNpbXVsYXRpb24gewogICAgICAgIGNvbnN0cnVjdG9yKGVsKSB7CiAgICAgICAgICAgIGlmKGVsIGluc3RhbmNlb2YgSFRNTEVsZW1lbnQgJiYgZWwubm9kZU5hbWUudG9Mb3dlckNhc2UoKSA9PT0gJ2NhbnZhcycpIHsKICAgICAgICAgICAgICAgIHRoaXMuZWwgPSBlbDsKICAgICAgICAgICAgICAgIHRoaXMuY3R4ID0gZWwuZ2V0Q29udGV4dCgnMmQnKTsKCiAgICAgICAgICAgICAgICB0aGlzLmJvZGllcyA9IFtdOwoKICAgICAgICAgICAgICAgIHRoaXMucnVuID0gdGhpcy5ydW4uYmluZCh0aGlzKTsKICAgICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgICAgIHJldHVybiBudWxsOwogICAgICAgICAgICB9CiAgICAgICAgfQoKICAgICAgICBhZGRCb2R5KGJvZHkpIHsKICAgICAgICAgICAgaWYoYm9keSBpbnN0YW5jZW9mIEJvZHkpIHsKICAgICAgICAgICAgICAgIGJvZHkueWVhcnNQZXJGcmFtZSA9IHRoaXMueWVhcnNQZXJGcmFtZTsKICAgICAgICAgICAgICAgIGJvZHkuZGltZW5zaW9ucyA9IHRoaXMucHhkaW1lbnNpb25zOwogICAgICAgICAgICAgICAgdGhpcy5ib2RpZXMucHVzaChib2R5KTsKICAgICAgICAgICAgfQogICAgICAgICAgICByZXR1cm4gdGhpcy5ib2RpZXMubGVuZ3RoLTE7CiAgICAgICAgfQogICAgICAgIHJlbW92ZUJvZHkoaSkgewogICAgICAgICAgICB0aGlzLmJvZGllcy5zcGxpY2UoaSwxKTsKICAgICAgICB9CgogICAgICAgIHVwZGF0ZSgpIHsKICAgICAgICAgICAgLy8gU2V0IHVwIHRoZSBjYW52YXMgZm9yIGRyYXdpbmcKICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYHJnYmEoMCwxMCwyMCwuOSlgOwogICAgICAgICAgICAvLyB0aGlzLmN0eC5jbGVhclJlY3QoMCwwLHRoaXMuZWwud2lkdGgsdGhpcy5lbC5oZWlnaHQpOwogICAgICAgICAgICB0aGlzLmN0eC5maWxsUmVjdCgwLDAsdGhpcy5lbC53aWR0aCx0aGlzLmVsLmhlaWdodCk7CiAgICAgICAgICAgIHRoaXMuY3R4LnRyYW5zbGF0ZSh0aGlzLnB4ZGltZW5zaW9ucy53aWR0aCouNSwgdGhpcy5weGRpbWVuc2lvbnMuaGVpZ2h0Ki41KTsKCgogICAgICAgICAgICBjb25zdCBsaW5lVGhyZXNob2xkID0gODAwMDA7CgogICAgICAgICAgICAvLyBMb29wIHRocm91Z2ggYWxsIG9mIHRoZSBib2RpZXMKICAgICAgICAgICAgdGhpcy5ib2RpZXMuZm9yRWFjaCgoYm9keVgpID0+IHsKICAgICAgICAgICAgICAgIGNvbnN0IGFjY2VsZXJhdGlvbiA9IG5ldyBWZWN0b3IoMCwwKTsgLy8gVGhpcyBpcyBvdXIgYmFzYWwsIG5ldyBhY2NlbGVyYXRpb24gZm9yIHRoaXMgYm9keQogICAgICAgICAgICAgICAgLy8gRm9yIGFsbCB0aGUgb3RoZXIgYm9kaWVzLCBjYWxjdWxhdGUgdGhlIGNvbWJpbmVkIGZvcmNlIGFzc2VydGVkIG9uIHRoaXMKICAgICAgICAgICAgICAgIHRoaXMuYm9kaWVzLmZvckVhY2goKGJvZHlZKSA9PiB7CiAgICAgICAgICAgICAgICAgICAgY29uc3QgZGlzdGFuY2UgPSBib2R5WS5wb3NpdGlvbi5zdWJ0cmFjdE5ldyhib2R5WC5wb3NpdGlvbik7IC8vIFRoZSBkaXN0YW5jZSBiZXR3ZWVuIHRoZSB0d28gYm9kaWVzCiAgICAgICAgICAgICAgICAgICAgY29uc3Qgc3FEID0gZGlzdGFuY2UubGVuZ3RoU3F1YXJlZDsgLy8gVGhlIGRpc3RhbmNlIHNxdWFyZWQgKGNoZWFwZXIgdGhhbiBjYWxjdWxhdGluZyBhY3R1YWwgZGlzdGFuY2UsIHNlZTogUHl0aGFnb3JhcykKICAgICAgICAgICAgICAgICAgICBjb25zdCBmb3JjZSA9ICh0aGlzLmdyYXZpdGF0aW9uYWxDb25zdGFudCAqIGJvZHlZLm1hc3MpIC8gKHNxRCAqIE1hdGguc3FydChzcUQgKiB0aGlzLnNtb290aGluZykpOyAvLyBIZXJlJ3Mgc29tZSBuZXd0b25pYW4gbW90aW9uIHdpdGggYSBzb21lIHNvZnRlbmluZyB0byBzdG9wIGl0IGZyb20gcmVhY2hpbmcgaW5maW5pdHkKCiAgICAgICAgICAgICAgICAgICAgYWNjZWxlcmF0aW9uLmFkZChkaXN0YW5jZS5zY2FsZShmb3JjZSkpOwoKICAgICAgICAgICAgICAgICAgICBpZihzcUQgPCBsaW5lVGhyZXNob2xkKSB7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2VTdHlsZSA9IGByZ2JhKDI1NSwyNTUsMjU1LCR7KChsaW5lVGhyZXNob2xkLXNxRCkvbGluZVRocmVzaG9sZCkqLjV9KWA7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4LmxpbmVXaWR0aCA9IDA7CiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuY3R4Lm1vdmVUbyhib2R5WC5wb3NpdGlvbi54LCBib2R5WC5wb3NpdGlvbi55KTsKICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5jdHgubGluZVRvKGJvZHlZLnBvc2l0aW9uLngsIGJvZHlZLnBvc2l0aW9uLnkpOwogICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmN0eC5zdHJva2UoKTsKICAgICAgICAgICAgICAgICAgICB9CiAgICAgICAgICAgICAgICB9KTsKICAgICAgICAgICAgICAgIC8vIFVwZGF0ZSB0aGUgYmFzYWwgYm9keSdzIGFjY2VsYXJhdGlvbiB3aXRoIHRoZSBjYWx1Y2FsdGVkIGZhY3RvcgogICAgICAgICAgICAgICAgYm9keVguYWNjZWxlcmF0aW9uID0gYWNjZWxlcmF0aW9uOwoKICAgICAgICAgICAgICAgIC8vIERyYXcgdGhlIGJvZHkKICAgICAgICAgICAgICAgIHRoaXMuY3R4LmJlZ2luUGF0aCgpOwogICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYHJnYmEoMjAwLDI1NSwyNTUsMSlgOwogICAgICAgICAgICAgICAgdGhpcy5jdHguYXJjKGJvZHlYLnBvc2l0aW9uLngsIGJvZHlYLnBvc2l0aW9uLnksIGJvZHlYLnNpemUsIDAsIDIgKiBNYXRoLlBJKTsKICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGwoKTsKCiAgICAgICAgICAgICAgICAvLyBTb2x2ZSBmb3IgdGhlIG5leHQgZnJhbWUKICAgICAgICAgICAgICAgIGJvZHlYLnNvbHZlKCk7CiAgICAgICAgICAgIH0pOwogICAgICAgICAgICAvLyBSZXNldCBjdXJyZW50IHRyYW5zZm9ybWF0aW9uIG1hdHJpeCB0byB0aGUgaWRlbnRpdHkgbWF0cml4CiAgICAgICAgICAgIHRoaXMuY3R4LnNldFRyYW5zZm9ybSgxLCAwLCAwLCAxLCAwLCAwKTsKICAgICAgICB9CgogICAgICAgIHJ1bihkZWx0YSkgewogICAgICAgICAgICBpZih0aGlzLnJ1bm5pbmcgPT09IHRydWUpIHsKICAgICAgICAgICAgICAgIHJlcXVlc3RBbmltYXRpb25GcmFtZSh0aGlzLnJ1bik7CiAgICAgICAgICAgIH0KCiAgICAgICAgICAgIHRoaXMudXBkYXRlKCk7CiAgICAgICAgfQoKICAgICAgICBzZXQgcnVubmluZyh2YWx1ZSkgewogICAgICAgICAgICBpZih0aGlzLnJ1bm5pbmcgPT09IGZhbHNlICYmIHZhbHVlID09PSB0cnVlKSByZXF1ZXN0QW5pbWF0aW9uRnJhbWUodGhpcy5ydW4pOwogICAgICAgICAgICB0aGlzLl9ydW5uaW5nID0gdmFsdWUgPT09IHRydWU7CiAgICAgICAgfQogICAgICAgIGdldCBydW5uaW5nKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fcnVubmluZyA9PT0gdHJ1ZTsKICAgICAgICB9CgogICAgICAgIHNldCBweHJhdGlvKHZhbHVlKSB7CiAgICAgICAgICAgIGlmKCFpc05hTih2YWx1ZSkpIHsKICAgICAgICAgICAgICAgIHRoaXMuX3B4cmF0aW8gPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXQgcHhyYXRpbygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3B4cmF0aW8gfHwgMTsKICAgICAgICB9CgogICAgICAgIHNldCBkaW1lbnNpb25zKHZhbHVlKSB7CiAgICAgICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgVmVjdG9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9kaW1lbnNpb25zID0gdmFsdWU7CiAgICAgICAgICAgICAgICB0aGlzLl9weGRpbWVuc2lvbnMgPSB2YWx1ZS5zY2FsZSh0aGlzLnB4cmF0aW8pOwogICAgICAgICAgICAgICAgdGhpcy5lbC53aWR0aCA9IHRoaXMuX3B4ZGltZW5zaW9ucy53aWR0aDsKICAgICAgICAgICAgICAgIHRoaXMuZWwuaGVpZ2h0ID0gdGhpcy5fcHhkaW1lbnNpb25zLmhlaWdodDsKCiAgICAgICAgICAgICAgICAvLyBTZXQgdXAgdGhlIGNhbnZhcyBmb3IgZHJhd2luZwogICAgICAgICAgICAgICAgdGhpcy5jdHguZmlsbFN0eWxlID0gYHJnYmEoMjAsMjAsMjAsMSlgOwogICAgICAgICAgICAgICAgLy8gdGhpcy5jdHguY2xlYXJSZWN0KDAsMCx0aGlzLmVsLndpZHRoLHRoaXMuZWwuaGVpZ2h0KTsKICAgICAgICAgICAgICAgIHRoaXMuY3R4LmZpbGxSZWN0KDAsMCx0aGlzLmVsLndpZHRoLHRoaXMuZWwuaGVpZ2h0KTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXQgZGltZW5zaW9ucygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2RpbWVuc2lvbnMgfHwgbmV3IFZlY3Rvcih0aGlzLmVsLndpZHRoL3RoaXMucHhyYXRpbywgdGhpcy5lbC5oZWlnaHQvdGhpcy5weHJhdGlvKTsKICAgICAgICB9CgogICAgICAgIGdldCBweGRpbWVuc2lvbnMoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9weGRpbWVuc2lvbnMgfHwgbmV3IFZlY3Rvcih0aGlzLmVsLndpZHRoLCB0aGlzLmVsLmhlaWdodCk7CiAgICAgICAgfQoKICAgICAgICBzZXQgZ3Jhdml0YXRpb25hbENvbnN0YW50KHZhbHVlKSB7CiAgICAgICAgICAgIGlmKCFpc05hTih2YWx1ZSkpIHRoaXMuX2dyYXZpdGF0aW9uYWxDb25zdGFudCA9IHZhbHVlOwogICAgICAgIH0KICAgICAgICBnZXQgZ3Jhdml0YXRpb25hbENvbnN0YW50KCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fZ3Jhdml0YXRpb25hbENvbnN0YW50IHx8IDQwOwogICAgICAgIH0KCiAgICAgICAgc2V0IHNtb290aGluZyh2YWx1ZSkgewogICAgICAgICAgICBpZighaXNOYU4odmFsdWUpKSB0aGlzLl9zbW9vdGhpbmcgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgZ2V0IHNtb290aGluZygpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Ntb290aGluZyB8fCAuNTsKICAgICAgICB9CgogICAgICAgIHNldCB5ZWFyc1BlckZyYW1lKHZhbHVlKSB7CiAgICAgICAgICAgIGlmKCFpc05hTih2YWx1ZSkpIHRoaXMuX3llYXJzUGVyRnJhbWUgPSB2YWx1ZTsKICAgICAgICB9CiAgICAgICAgZ2V0IHllYXJzUGVyRnJhbWUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl95ZWFyc1BlckZyYW1lIHx8IC4yOwogICAgICAgIH0KICAgIH0KCiAgICBjbGFzcyBCb2R5IHsKICAgICAgICBjb25zdHJ1Y3Rvcihwb3NpdGlvbiwgdmVsb2NpdHksIG1hc3MsIHNpemUsIGZpeGVkID0gZmFsc2UpIHsKICAgICAgICAgICAgdGhpcy5wb3NpdGlvbiA9IHBvc2l0aW9uOwogICAgICAgICAgICB0aGlzLnZlbG9jaXR5ID0gdmVsb2NpdHk7CiAgICAgICAgICAgIHRoaXMuYWNjZWxlcmF0aW9uID0gbmV3IFZlY3RvcigwLDApOwogICAgICAgICAgICB0aGlzLm1hc3MgPSBtYXNzOwogICAgICAgICAgICB0aGlzLnNpemUgPSBzaXplOwogICAgICAgICAgICB0aGlzLmZpeGVkID0gZml4ZWQ7CiAgICAgICAgfQoKICAgICAgICBzb2x2ZSgpIHsKICAgICAgICAgICAgaWYodGhpcy5maXhlZCkgcmV0dXJuOwogICAgICAgICAgICAvLyBjb25zb2xlLmxvZyh0aGlzLmFjY2VsZXJhdGlvbikKICAgICAgICAgICAgbGV0IHZlbD0gdGhpcy52ZWxvY2l0eS5hZGROZXcodGhpcy5hY2NlbGVyYXRpb24uc2NhbGVOZXcodGhpcy55ZWFyc1BlckZyYW1lKSk7CiAgICAgICAgICAgIHRoaXMudmVsb2NpdHkgPSB2ZWw7CiAgICAgICAgICAgIHRoaXMucG9zaXRpb24uYWRkKHRoaXMudmVsb2NpdHkuc2NhbGVOZXcodGhpcy55ZWFyc1BlckZyYW1lKSk7CiAgICAgICAgICAgIGlmKHRoaXMucG9zaXRpb24ueCA+IHRoaXMuZGltZW5zaW9ucy54ICogLjUgKyAzMC4pIHsKICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCA9IHRoaXMuZGltZW5zaW9ucy54ICogLS41IC0gMTAuOwogICAgICAgICAgICB9IGVsc2UgaWYodGhpcy5wb3NpdGlvbi54IDwgdGhpcy5kaW1lbnNpb25zLnggKiAtLjUgLSAzMC4pIHsKICAgICAgICAgICAgICAgIHRoaXMucG9zaXRpb24ueCA9IHRoaXMuZGltZW5zaW9ucy54ICogLjUgKyAxMC47CiAgICAgICAgICAgIH0KICAgICAgICAgICAgaWYodGhpcy5wb3NpdGlvbi55ID4gdGhpcy5kaW1lbnNpb25zLnkgKiAuNSArIDMwLikgewogICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gdGhpcy5kaW1lbnNpb25zLnkgKiAtLjUgLSAxMC47CiAgICAgICAgICAgIH0gZWxzZSBpZih0aGlzLnBvc2l0aW9uLnkgPCB0aGlzLmRpbWVuc2lvbnMueSAqIC0uNSAtIDMwLikgewogICAgICAgICAgICAgICAgdGhpcy5wb3NpdGlvbi55ID0gdGhpcy5kaW1lbnNpb25zLnkgKiAuNSArIDEwLjsKICAgICAgICAgICAgfQogICAgICAgIH0KCiAgICAgICAgc2V0IGZpeGVkKHZhbHVlKSB7CiAgICAgICAgICAgIHRoaXMuX2ZpeGVkID0gdmFsdWUgPT09IHRydWU7CiAgICAgICAgfQogICAgICAgIGdldCBmaXhlZCgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX2ZpeGVkID09PSB0cnVlOwogICAgICAgIH0KCiAgICAgICAgc2V0IHBvc2l0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgVmVjdG9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9wb3NpdGlvbiA9IHZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGdldCBwb3NpdGlvbigpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3Bvc2l0aW9uIHx8IG51bGw7CiAgICAgICAgfQoKICAgICAgICBzZXQgZnJpY3Rpb24odmFsdWUpIHsKICAgICAgICAgICAgaWYoIWlzTmFOKHZhbHVlKSkgewogICAgICAgICAgICAgICAgdGhpcy5fZnJpY3Rpb24gPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXQgZnJpY3Rpb24oKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9mcmljdGlvbiB8fCAuOTk7CiAgICAgICAgfQoKICAgICAgICBzZXQgbWF4VmVsb2NpdHkodmFsdWUpIHsKICAgICAgICAgICAgaWYoIWlzTmFOKHZhbHVlKSkgewogICAgICAgICAgICAgICAgdGhpcy5fbWF4VmVsb2NpdHkgPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXQgbWF4VmVsb2NpdHkoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXhWZWxvY2l0eSB8fCA1MC47CiAgICAgICAgfQoKICAgICAgICBzZXQgdmVsb2NpdHkodmFsdWUpIHsKICAgICAgICAgICAgaWYodmFsdWUgaW5zdGFuY2VvZiBWZWN0b3IpIHsKICAgICAgICAgICAgICAgIGlmKHZhbHVlLmxlbmd0aCA+IHRoaXMubWF4VmVsb2NpdHkpIHZhbHVlLm5vcm1hbGlzZSgpLnNjYWxlKHRoaXMubWF4VmVsb2NpdHkpOwogICAgICAgICAgICAgICAgdmFsdWUuc2NhbGUodGhpcy5mcmljdGlvbik7CiAgICAgICAgICAgICAgICB0aGlzLl92ZWxvY2l0eSA9IHZhbHVlOwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgICAgIGdldCB2ZWxvY2l0eSgpIHsKICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3ZlbG9jaXR5IHx8IG51bGw7CiAgICAgICAgfQoKICAgICAgICBzZXQgYWNjZWxlcmF0aW9uKHZhbHVlKSB7CiAgICAgICAgICAgIGlmKHZhbHVlIGluc3RhbmNlb2YgVmVjdG9yKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9hY2NlbGVyYXRpb24gPSB2YWx1ZTsKICAgICAgICAgICAgfQogICAgICAgIH0KICAgICAgICBnZXQgYWNjZWxlcmF0aW9uKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5fYWNjZWxlcmF0aW9uIHx8IG51bGw7CiAgICAgICAgfQoKICAgICAgICBzZXQgbWFzcyh2YWx1ZSkgewogICAgICAgICAgICBpZighaXNOYU4odmFsdWUpKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9tYXNzID0gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZ2V0IG1hc3MoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9tYXNzIHx8IDA7CiAgICAgICAgfQoKICAgICAgICBzZXQgc2l6ZSh2YWx1ZSkgewogICAgICAgICAgICBpZighaXNOYU4odmFsdWUpKSB7CiAgICAgICAgICAgICAgICB0aGlzLl9zaXplID0gdmFsdWU7CiAgICAgICAgICAgIH0KICAgICAgICB9CiAgICAgICAgZ2V0IHNpemUoKSB7CiAgICAgICAgICAgIHJldHVybiB0aGlzLl9zaXplIHx8IDA7CiAgICAgICAgfQoKICAgICAgICBzZXQgeWVhcnNQZXJGcmFtZSh2YWx1ZSkgewogICAgICAgICAgICBpZighaXNOYU4odmFsdWUpKSB0aGlzLl95ZWFyc1BlckZyYW1lID0gdmFsdWU7CiAgICAgICAgfQogICAgICAgIGdldCB5ZWFyc1BlckZyYW1lKCkgewogICAgICAgICAgICByZXR1cm4gdGhpcy5feWVhcnNQZXJGcmFtZSB8fCAuMDA4OwogICAgICAgIH0KICAgIH0KCiAgICAvL2NvbnNvbGUuY2xlYXIoKTsKCiAgICBjb25zdCBzaW0gPSBuZXcgU2ltdWxhdGlvbihkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCdjYW52YXMnKSk7CiAgICBzaW0uZGltZW5zaW9ucyA9IG5ldyBWZWN0b3Iod2luZG93LmlubmVyV2lkdGgsIHdpbmRvdy5pbm5lckhlaWdodCk7CiAgICBjb25zb2xlLmxvZyhzaW0uZGltZW5zaW9ucykKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdyZXNpemUnLCAoZSkgPT4gewogICAgICAgIHNpbS5kaW1lbnNpb25zID0gbmV3IFZlY3Rvcih3aW5kb3cuaW5uZXJXaWR0aCwgd2luZG93LmlubmVySGVpZ2h0KTsKICAgIH0pOwoKICAgIGxldCBtb3VzZUJvZHkgPSBuZXcgQm9keShuZXcgVmVjdG9yKDAsIDApLCBuZXcgVmVjdG9yKDAsMCksIC0xMDAwLCA1MCwgdHJ1ZSk7CiAgICBsZXQgYm9keUluZGV4ID0gbnVsbDsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVyZG93bicsIChlKSA9PiB7CiAgICAgICAgbW91c2VCb2R5LnBvc2l0aW9uLnggPSBlLnBhZ2VYIC0gd2luZG93LmlubmVyV2lkdGggKiAuNTsKICAgICAgICBtb3VzZUJvZHkucG9zaXRpb24ueSA9IGUucGFnZVkgLSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAuNTsKICAgICAgICBjb25zb2xlLmxvZyhtb3VzZUJvZHkucG9zaXRpb24pOwogICAgICAgIGJvZHlJbmRleCA9IHNpbS5hZGRCb2R5KG1vdXNlQm9keSk7CiAgICB9KTsKICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdwb2ludGVybW92ZScsIChlKSA9PiB7CiAgICAgICAgbW91c2VCb2R5LnBvc2l0aW9uLnggPSBlLnBhZ2VYIC0gd2luZG93LmlubmVyV2lkdGggKiAuNTsKICAgICAgICBtb3VzZUJvZHkucG9zaXRpb24ueSA9IGUucGFnZVkgLSB3aW5kb3cuaW5uZXJIZWlnaHQgKiAuNTsKICAgIH0pOwogICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3BvaW50ZXJ1cCcsIChlKSA9PiB7CiAgICAgICAgc2ltLnJlbW92ZUJvZHkoYm9keUluZGV4KTsKICAgICAgICBib2R5SW5kZXggPSBudWxsOwogICAgfSk7CgogICAgLy8gc2ltLmFkZEJvZHkobmV3IEJvZHkobmV3IFZlY3RvcigwLCAwKSwgbmV3IFZlY3RvcigwLDApLCAtMywgNTAsIHRydWUpKTsKICAgIC8vIHNpbS5hZGRCb2R5KG5ldyBCb2R5KG5ldyBWZWN0b3IoMCwgNTAwKSwgbmV3IFZlY3RvcigwLDApLCAxLCAxMCwgdHJ1ZSkpOwoKICAgIGZvcihpPTA7aTx3aW5kb3cuaW5uZXJXaWR0aCAqIHdpbmRvdy5pbm5lckhlaWdodCAqIDAuMDAwMDg7aSsrKSB7CiAgICAgICAgY29uc3QgciA9IG5ldyBWZWN0b3IoNDAwICsgTWF0aC5yYW5kb20oKSAqIDUwMCwgTWF0aC5yYW5kb20oKSAqIE1hdGguUEkgKiAyLik7CiAgICAgICAgY29uc3QgcCA9IG5ldyBWZWN0b3IoTWF0aC5jb3Moci55KSAqIHIueCwgTWF0aC5zaW4oci55KSAqIHIueCk7CiAgICAgICAgY29uc3QgYSA9IG5ldyBWZWN0b3IocC55LCAtcC54KS5ub3JtYWxpc2UoKS5zY2FsZSgxMC4pOwogICAgICAgIC8vIGNvbnN0IGEgPSBuZXcgVmVjdG9yKDAsMCk7CiAgICAgICAgY29uc3QgcmYgPSBNYXRoLnJhbmRvbSgpOwogICAgICAgIHNpbS5hZGRCb2R5KG5ldyBCb2R5KHAsIGEsIC0xMCArIHJmICogMTUuLCAxICsgcmYgKiAxMCkpOwogICAgICAgIC8vIHNpbS5hZGRCb2R5KG5ldyBCb2R5KHAsIGEsIC41ICsgcmYgKiAuNSwgNSArIHJmICogNS4pKTsKCiAgICB9CgogICAgc2ltLnJ1bm5pbmcgPSB0cnVlOwo8L3NjcmlwdD4KCjxkaXYgY2xhc3M9ImNhcmQtYmFjayI+CiAgICA8aDE+Q2xhc2jphY3nva7mlofku7bono3lkIg8L2gxPgoKICAgIDwhLS0g6Kej56CB6YOo5YiGIC0tPgogICAgPGRpdiBpZD0iaW5wdXQtY29udGFpbmVyIj4KICAgICAgICA8IS0tIOWIneWni+i+k+WFpeahhiAtLT4KICAgICAgICA8ZGl2IGNsYXNzPSJpbnB1dC1ncm91cCI+CiAgICAgICAgICAgIDxpbnB1dCB0eXBlPSJ0ZXh0IiBjbGFzcz0iaW5wdXQtZmllbGQiIHBsYWNlaG9sZGVyPSLnspjotLTorqLpmIXpk77mjqUiPgogICAgICAgIDwvZGl2PgogICAgPC9kaXY+CgogICAgPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAiPgogICAgICAgIDxidXR0b24gb25jbGljaz0iYWRkSW5wdXQoKSI+4p6VPC9idXR0b24+CiAgICAgICAgPGJ1dHRvbiBvbmNsaWNrPSJjb3B5TGluaygpIj7ono3lkIjphY3nva48L2J1dHRvbj4KICAgIDwvZGl2PgogICAgPGRpdiBjbGFzcz0iaW5wdXQtZ3JvdXAiPgogICAgICAgIDxkaXYgaWQ9InFyY29kZSI+PC9kaXY+CiAgICA8L2Rpdj4KCjwvZGl2PgoKCjxzY3JpcHQ+CiAgICAvLyDojrflj5bovpPlhaXmoYblrrnlmagKICAgIGNvbnN0IGlucHV0Q29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ2lucHV0LWNvbnRhaW5lcicpOwoKICAgIC8vIOa3u+WKoOi+k+WFpeahhgogICAgZnVuY3Rpb24gYWRkSW5wdXQoKSB7CiAgICAgICAgLy8g6I635Y+W5pyA5ZCO5LiA5Liq6L6T5YWl57uECiAgICAgICAgY29uc3QgbGFzdElucHV0R3JvdXAgPSBpbnB1dENvbnRhaW5lci5sYXN0RWxlbWVudENoaWxkOwoKICAgICAgICAvLyDliJvlu7rmlrDnmoTovpPlhaXnu4QKICAgICAgICBjb25zdCBuZXdJbnB1dEdyb3VwID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7CiAgICAgICAgbmV3SW5wdXRHcm91cC5jbGFzc05hbWUgPSAnaW5wdXQtZ3JvdXAnOwoKICAgICAgICAvLyDliJvlu7rmlrDnmoTovpPlhaXmoYYKICAgICAgICBjb25zdCBuZXdJbnB1dCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2lucHV0Jyk7CiAgICAgICAgbmV3SW5wdXQudHlwZSA9ICd0ZXh0JzsKICAgICAgICBuZXdJbnB1dC5jbGFzc05hbWUgPSAnaW5wdXQtZmllbGQnOwogICAgICAgIG5ld0lucHV0LnBsYWNlaG9sZGVyID0gJ+eymOi0tOiuoumYhemTvuaOpSc7CgogICAgICAgIC8vIOWIm+W7uumAl+WPt+aMiemSrgogICAgICAgIGNvbnN0IGNvbW1hQnV0dG9uID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnYnV0dG9uJyk7CiAgICAgICAgY29tbWFCdXR0b24uZGlzYWJsZWQgPSB0cnVlOyAvLyDnpoHnlKjmjInpkq4KICAgICAgICBjb21tYUJ1dHRvbi50ZXh0Q29udGVudCA9ICfvvIwnOyAvLyDpgJflj7fooajmg4XnrKblj7cKICAgICAgICBjb21tYUJ1dHRvbi5jbGFzc05hbWUgPSAnY29tbWEtYnV0dG9uJzsKCiAgICAgICAgLy8g5bCG6YCX5Y+35oyJ6ZKu5re75Yqg5Yiw5LiK5LiA5Liq6L6T5YWl57uE55qE5pyr5bC+CiAgICAgICAgaWYgKGxhc3RJbnB1dEdyb3VwKSB7CiAgICAgICAgICAgIGxhc3RJbnB1dEdyb3VwLmFwcGVuZENoaWxkKGNvbW1hQnV0dG9uKTsKICAgICAgICB9CgogICAgICAgIC8vIOWwhuaWsOeahOi+k+WFpeahhua3u+WKoOWIsOaWsOeahOi+k+WFpee7hAogICAgICAgIG5ld0lucHV0R3JvdXAuYXBwZW5kQ2hpbGQobmV3SW5wdXQpOwoKICAgICAgICAvLyDlsIbmlrDnmoTovpPlhaXnu4Tmt7vliqDliLDlrrnlmajkuK0KICAgICAgICBpbnB1dENvbnRhaW5lci5hcHBlbmRDaGlsZChuZXdJbnB1dEdyb3VwKTsKICAgIH0KCiAgICAvLyDlpI3liLbpk77mjqXliLDliarotLTmnb8KICAgIGZ1bmN0aW9uIGNvcHlMaW5rKCkgewogICAgICAgIGNvbnN0IGlucHV0cyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy5pbnB1dC1maWVsZCcpOwogICAgICAgIGNvbnN0IGxpbmtzID0gQXJyYXkuZnJvbShpbnB1dHMpLm1hcChpbnB1dCA9PiBpbnB1dC52YWx1ZS50cmltKCkpLmZpbHRlcih2YWx1ZSA9PiB2YWx1ZSAhPT0gJycpOwogICAgICAgIGNvbnN0IGNvbWJpbmVkTGlua3MgPSBsaW5rcy5qb2luKCcsJyk7CgogICAgICAgIGNvbnN0IGxpbmsgPSBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS8/bGlua3M9JHtlbmNvZGVVUklDb21wb25lbnQoY29tYmluZWRMaW5rcyl9YDsKCiAgICAgICAgLy8g5aSN5Yi26ZO+5o6l5Yiw5Ymq6LS05p2/CiAgICAgICAgbmF2aWdhdG9yLmNsaXBib2FyZC53cml0ZVRleHQobGluayk7CiAgICAgICAgY29uc29sZS5sb2cobGluayk7CiAgICAgICAgdmFyIHFyID0gcXJjb2RlKDE2LCAiTSIpOwogICAgICAgIHFyLmFkZERhdGEobGluayk7CiAgICAgICAgcXIubWFrZSgpOwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJxcmNvZGUiKS5pbm5lckhUTUwgPSBxci5jcmVhdGVJbWdUYWcoKTsKICAgIH0KPC9zY3JpcHQ+CjwvYm9keT4KPC9odG1sPg==

`